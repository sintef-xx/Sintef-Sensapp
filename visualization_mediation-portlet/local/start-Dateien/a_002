AUI().add("liferay-session",function(a){var b={autoExtend:false,sessionTimeout:0,sessionTimeoutWarning:0,redirectOnExpire:false,init:function(e){var c=this;e=e||{};c.autoExtend=e.autoExtend||c.autoExtend;c._timeout=e.timeout||c.sessionTimeout;c._warning=e.timeoutWarning||c.sessionTimeoutWarning;c.sessionTimeout=c._timeout*60000;c.sessionTimeoutWarning=c._warning*60000;c._timeoutDiff=c.sessionTimeout-c.sessionTimeoutWarning;c._currentTime=c.sessionTimeoutWarning;c.redirectOnExpire=e.redirectOnExpire||c.redirectOnExpire;c._cookieKey="LFR_SESSION_STATE_"+themeDisplay.getUserId();var d=themeDisplay.getPathMain()+"/portal/";c._sessionUrls={expire:d+"expire_session",extend:d+"extend_session"};c._stateCheck=setTimeout(function(){c.checkState()},c._timeoutDiff);c._toggleText={hide:'\u0048\u0069\u0064\u0065',show:'\u0053\u0068\u006f\u0077'};c._expiredText='\u0057\u0061\u0072\u006e\u0069\u006e\u0067\u0021\u0020\u0044\u0075\u0065\u0020\u0074\u006f\u0020\u0069\u006e\u0061\u0063\u0074\u0069\u0076\u0069\u0074\u0079\u002c\u0020\u0079\u006f\u0075\u0072\u0020\u0073\u0065\u0073\u0073\u0069\u006f\u006e\u0020\u0068\u0061\u0073\u0020\u0065\u0078\u0070\u0069\u0072\u0065\u0064\u002e\u0020\u0050\u006c\u0065\u0061\u0073\u0065\u0020\u0073\u0061\u0076\u0065\u0020\u0061\u006e\u0079\u0020\u0064\u0061\u0074\u0061\u0020\u0079\u006f\u0075\u0020\u006d\u0061\u0079\u0020\u0068\u0061\u0076\u0065\u0020\u0065\u006e\u0074\u0065\u0072\u0065\u0064\u0020\u0062\u0065\u0066\u006f\u0072\u0065\u0020\u0072\u0065\u0066\u0072\u0065\u0073\u0068\u0069\u006e\u0067\u0020\u0074\u0068\u0065\u0020\u0070\u0061\u0067\u0065\u002e';c._extendText='\u0045\u0078\u0074\u0065\u006e\u0064';c._warningText='\u0057\u0061\u0072\u006e\u0069\u006e\u0067\u0021\u0020\u0044\u0075\u0065\u0020\u0074\u006f\u0020\u0069\u006e\u0061\u0063\u0074\u0069\u0076\u0069\u0074\u0079\u002c\u0020\u0079\u006f\u0075\u0072\u0020\u0073\u0065\u0073\u0073\u0069\u006f\u006e\u0020\u0077\u0069\u006c\u006c\u0020\u0065\u0078\u0070\u0069\u0072\u0065\u0020\u0069\u006e\u0020\u007b\u0030\u007d\u002e\u0020\u0054\u006f\u0020\u0065\u0078\u0074\u0065\u006e\u0064\u0020\u0079\u006f\u0075\u0072\u0020\u0073\u0065\u0073\u0073\u0069\u006f\u006e\u0020\u0061\u006e\u006f\u0074\u0068\u0065\u0072\u0020\u007b\u0031\u007d\u0020\u006d\u0069\u006e\u0075\u0074\u0065\u0028\u0073\u0029\u002c\u0020\u0070\u006c\u0065\u0061\u0073\u0065\u0020\u0070\u0072\u0065\u0073\u0073\u0020\u0074\u0068\u0065\u0020\u003c\u0065\u006d\u003e\u0045\u0078\u0074\u0065\u006e\u0064\u003c\u002f\u0065\u006d\u003e\u0020\u0062\u0075\u0074\u0074\u006f\u006e\u002e';c._warningText=a.substitute(c._warningText,['<span class="countdown-timer"></span>',c._timeout]);c.setCookie()},checkState:function(){var c=this;var e=new Date().getTime();var d=c.getCookie();var f=c.sessionTimeoutWarning;var g=0;clearTimeout(c._stateCheck);if(d=="expired"){c.expire()}else{g=e-d;if(!c.autoExtend){if((g+100)>=c.sessionTimeoutWarning){c.warn()}else{f=(c.sessionTimeoutWarning-g)+10000;c._stateCheck=setTimeout(function(){c.checkState()},f)}}else{c.extend()}}},getCookie:function(){var c=this;return a.Cookie.get(c._cookieKey)||0},expire:function(){var c=this;document.title=c._originalTitle;a.io.request(c._sessionUrls.expire,{on:{success:function(d,f,e){if(c.redirectOnExpire){location.href=themeDisplay.getURLHome()}Liferay.fire("sessionExpired")}}});c.setCookie("expired")},extend:function(){var c=this;if(c._countdownTimer){clearInterval(c._countdownTimer)}a.io.request(c._sessionUrls.extend);document.title=c._originalTitle;c._currentTime=c.sessionTimeoutWarning;clearTimeout(c._sessionExpired);if(c._sessionWarning){clearTimeout(c._sessionWarning)}c._sessionWarning=setTimeout(function(){if(!c.autoExtend){c.warn()}else{c.extend()}},c._timeoutDiff);c.setCookie()},setCookie:function(d){var c=this;var f=new Date().getTime();var e={secure:a.UA.secure};a.Cookie.set(c._cookieKey,d||f,e)},warn:function(){var c=this;c.banner=new Liferay.Notice({closeText:c._extendText,content:c._warningText,onClose:function(){c.extend()},toggleText:false});c._counter();c._sessionExpired=setTimeout(function(){c.expire()},c.sessionTimeoutWarning)},_counter:function(){var c=this;var d=c.banner;if(d){c._counterText=d.one(".countdown-timer");c._originalTitle=document.title;var e=1000;c._counterText.text(c._setTime());document.title=c.banner.text();c._countdownTimer=setInterval(function(){var f=c._setTime();c._currentTime=c._currentTime-e;if(c._currentTime>0){c._counterText.text(f);document.title=c.banner.text()}else{c.banner.html(c._expiredText);c.banner.toggleClass("popup-alert-notice").toggleClass("popup-alert-warning");if(c._countdownTimer){clearInterval(c._countdownTimer)}}},e)}},_formatNumber:function(d){var c=this;if(!Liferay.Util.isArray(d)){if(d<=9){d="0"+d}}else{d=a.Array.map(d,c._formatNumber)}return d},_setTime:function(){var c=this;var g=c._currentTime;if(g<=0){}else{var i=0,d=0,f=0,h=0,e="";g=Math.floor(g/1000);d=Math.floor(g/3600);g=g%3600;f=Math.floor(g/60);g=g%60;h=Math.floor(g);return c._formatNumber([d,f,h]).join(":")}},_banner:[],_currentTime:0,_originalTitle:"",_sessionUrls:{},_timeout:0,_timeoutDiff:0,_warning:0};Liferay.Session=b},"",{requires:["aui-io","collection","cookie","liferay-notice","substitute"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.2.0PR1
build: nightly
*/
YUI.add("cookie",function(C){var K=C.Lang,I=C.Object,G=null,D=K.isString,P=K.isObject,F=K.isUndefined,E=K.isFunction,H=encodeURIComponent,B=decodeURIComponent,N=C.config.doc;function J(L){throw new TypeError(L);}function M(L){if(!D(L)||L===""){J("Cookie name must be a non-empty string.");}}function A(L){if(!D(L)||L===""){J("Subcookie name must be a non-empty string.");}}C.Cookie={_createCookieString:function(Q,T,R,O){O=O||{};var V=H(Q)+"="+(R?H(T):T),L=O.expires,U=O.path,S=O.domain;if(P(O)){if(L instanceof Date){V+="; expires="+L.toUTCString();}if(D(U)&&U!==""){V+="; path="+U;}if(D(S)&&S!==""){V+="; domain="+S;}if(O.secure===true){V+="; secure";}}return V;},_createCookieHashString:function(L){if(!P(L)){J("Cookie._createCookieHashString(): Argument must be an object.");}var O=[];I.each(L,function(R,Q){if(!E(R)&&!F(R)){O.push(H(Q)+"="+H(String(R)));}});return O.join("&");},_parseCookieHash:function(S){var R=S.split("&"),T=G,Q={};if(S.length){for(var O=0,L=R.length;O<L;O++){T=R[O].split("=");Q[B(T[0])]=B(T[1]);}}return Q;},_parseCookieString:function(W,Y){var X={};if(D(W)&&W.length>0){var L=(Y===false?function(Z){return Z;}:B),U=W.split(/;\s/g),V=G,O=G,R=G;for(var Q=0,S=U.length;Q<S;Q++){R=U[Q].match(/([^=]+)=/i);if(R instanceof Array){try{V=B(R[1]);O=L(U[Q].substring(R[1].length+1));}catch(T){}}else{V=B(U[Q]);O="";}X[V]=O;}}return X;},exists:function(L){M(L);var O=this._parseCookieString(N.cookie,true);return O.hasOwnProperty(L);},get:function(O,L){M(O);var S,Q,R;if(E(L)){R=L;L={};}else{if(P(L)){R=L.converter;}else{L={};}}S=this._parseCookieString(N.cookie,!L.raw);Q=S[O];if(F(Q)){return G;}if(!E(R)){return Q;}else{return R(Q);}},getSub:function(L,Q,O){var R=this.getSubs(L);if(R!==G){A(Q);if(F(R[Q])){return G;}if(!E(O)){return R[Q];}else{return O(R[Q]);}}else{return G;}},getSubs:function(L){M(L);var O=this._parseCookieString(N.cookie,false);if(D(O[L])){return this._parseCookieHash(O[L]);}return G;},remove:function(O,L){M(O);L=C.merge(L||{},{expires:new Date(0)});return this.set(O,"",L);},removeSub:function(O,S,L){M(O);A(S);L=L||{};var R=this.getSubs(O);if(P(R)&&R.hasOwnProperty(S)){delete R[S];if(!L.removeIfEmpty){return this.setSubs(O,R,L);}else{for(var Q in R){if(R.hasOwnProperty(Q)&&!E(R[Q])&&!F(R[Q])){return this.setSubs(O,R,L);}}return this.remove(O,L);}}else{return"";}},set:function(O,Q,L){M(O);if(F(Q)){J("Cookie.set(): Value cannot be undefined.");}L=L||{};var R=this._createCookieString(O,Q,!L.raw,L);N.cookie=R;return R;},setSub:function(O,R,Q,L){M(O);A(R);if(F(Q)){J("Cookie.setSub(): Subcookie value cannot be undefined.");}var S=this.getSubs(O);if(!P(S)){S={};}S[R]=Q;return this.setSubs(O,S,L);},setSubs:function(O,Q,L){M(O);if(!P(Q)){J("Cookie.setSubs(): Cookie value must be an object.");}var R=this._createCookieString(O,this._createCookieHashString(Q),false,L);N.cookie=R;return R;}};},"3.2.0PR1",{requires:["yui-base"]});AUI().add("liferay-poller",function(j){var M=Liferay.Util.randomInt();var w=false;var l=false;var s=null;var u=[1,2,3,4,5,7,10];var D=0;var L=0;var B=function(){return s};var N=false;var F=false;var v=u.length-1;var k={startPolling:true,browserKey:M,companyId:themeDisplay.getCompanyId(),initialRequest:true};var g={};var C=[];var J=[k];var I=u[0];var m=[];var H=false;var n=null;var e=themeDisplay.getPathContext()+"/poller";var d=e+"/receive";var x=e+"/send";var a="}";var o="[$CLOSE_CURLY_BRACE$]";var r="{";var h="[$OPEN_CURLY_BRACE$]";var i=function(){clearTimeout(n);n=null};var G=function(){i();if(w){if(t.isSupportsComet()){p()}else{n=setTimeout(p,t.getDelay())}}};var f=function(){N=true;i()};var E=function(){return d};var c=function(){return x};var y=function(A,Q){var P=j.JSON.parse(Q.responseText);if(Liferay.Util.isArray(P)){var V=P.shift();var T;var S;var U;for(var R=0,O=P.length;R<O;R++){T=P[R];S=T.portletId;U=g[S];if(U){if(V.initialRequest){T.data.initialRequest=true}U.listener.call(U.scope||t,T.data,T.chunkId);if(T.data&&T.data.pollerHintHighConnectivity){I=u[0];D=0}}}if("startPolling" in k){delete k.startPolling}if("initialRequest" in k){q();delete k.initialRequest}if(!V.suspendPolling){b()}else{f()}}};var p=function(){if(!H&&!N){k.userId=B();k.timestamp=(new Date()).getTime();k.portletIds=C.join(",");var A=j.JSON.stringify([k]);j.io(E(),{data:{pollerRequest:A},method:AUI.defaults.io.method,on:{success:y}})}};var z=function(){F=false};var K=function(){z();q()};var q=function(){if(w&&!F&&m.length&&!H&&!N){F=true;var O=m.shift();k.userId=B();k.timestamp=(new Date()).getTime();k.portletIds=C.join(",");var A=j.JSON.stringify([k].concat(O));j.io(c(),{data:{pollerRequest:A},method:AUI.defaults.io.method,on:{complete:K}})}};var b=function(){N=false;G()};var t={init:function(O){var A=this;A.setEncryptedUserId(O.encryptedUserId);A.setSupportsComet(O.supportsComet)},url:e,addListener:function(A,P,O){g[A]={listener:P,scope:O};if(j.Array.indexOf(C,A)==-1){C.push(A)}if(!w){w=true;p()}},getDelay:function(){if(D<=v){I=u[D];L++;if(L==3){D++;L=0}}return I*1000},getReceiveUrl:E,getSendUrl:c,isSupportsComet:function(){return l},processResponse:y,removeListener:function(P){var A=this;if(P in g){delete g[P]}var O=j.Array.indexOf(C,P);if(O>-1){C.splice(O,1)}if(!C.length){w=false;i()}},resume:function(){H=false;G()},setDelay:function(A){I=A/1000},setEncryptedUserId:function(A){s=A},setSupportsComet:function(A){l=A},setUrl:function(A){e=A},submitRequest:function(Q,S,A){if(!N&&(Q in g)){for(var P in S){var R=S[P];if(R.replace){R=R.replace(r,h);R=R.replace(a,o);S[P]=R}}var O={portletId:Q,data:S};if(A){O.chunkId=A}m.push(O);q()}},suspend:function(){i();H=true}};j.getDoc().on("focus",function(A){k.startPolling=true;b()});Liferay.Poller=t},"",{requires:["aui-base","io","json"],use:[]});AUI().add("liferay-notice",function(a){var b=function(d){var c=this;d=d||{};c._noticeType=d.type||"notice";c._noticeClass="popup-alert-notice";c._useCloseButton=true;c._onClose=d.onClose;c._closeText=d.closeText;c._body=a.getBody();c._useToggleButton=false;c._hideText="";c._showText="";if(d.toggleText!==false){c.toggleText=a.mix(d.toggleText,{hide:null,show:null});c._useToggleButton=true}if(c._noticeType=="warning"){c._noticeClass="popup-alert-warning"}if(d.noticeClass){c._noticeClass+=" "+d.noticeClass}c._content=d.content||"";c._createHTML();return c._notice};b.prototype={setClosing:function(){var c=this;var d=a.all(".popup-alert-notice, .popup-alert-warning");if(d.size()){c._useCloseButton=true;if(!c._body){c._body=a.getBody()}c._body.addClass("has-alerts");d.each(c._addCloseButton,c)}},_createHTML:function(){var c=this;var d=a.Node.create('<div class="'+c._noticeClass+'" dynamic="true"><div class="popup-alert-content"></div></div>');d.html(c._content);c._addCloseButton(d);c._addToggleButton(d);c._body.append(d);c._body.addClass("has-alerts");c._notice=d},_addCloseButton:function(f){var c=this;if(c._closeText!==false){c._closeText=c._closeText||'\u0043\u006c\u006f\u0073\u0065'}else{c._useCloseButton=false;c._closeText=""}if(c._useCloseButton){var e='<input class="submit popup-alert-close" type="submit" value="'+c._closeText+'" />';f.append(e);var d=f.one(".popup-alert-close");d.on("click",function(){f.hide();f.remove(true);c._body.removeClass("has-alerts");if(c._onClose){c._onClose()}})}},_addToggleButton:function(h){var d=this;if(d._useToggleButton){d._hideText=d._toggleText.hide||'\u0048\u0069\u0064\u0065';d._showText=d._toggleText.show||'\u0053\u0068\u006f\u0077';var i=a.Node.create('<a class="toggle-button" href="javascript:;"><span>'+d._hideText+"</span></a>");var g=i.one("span");var c=0;var j=0;var f=d._showText;var e=d._hideText;i.on("click",function(k){var l=f;if(j==0){l=e;j=1}else{j=0}h.toggle();g.text(l)});h.append(i)}}};Liferay.Notice=b},"",{requires:["aui-base"]});AUI().add("liferay-navigation",function(a){var c=a.Lang;var e='<span class="delete-tab aui-helper-hidden">X</span>';var f='<li class="add-page"></li>';var b='<a href="{url}"><span>{pageTitle}</span></a>';var d=a.Component.create({ATTRS:{hasPermission:{value:false},isModifiable:{getter:function(h){var g=this;return g.get("hasPermission")&&g.get("navBlock").hasClass("modify-pages")},value:false},isSortable:{getter:function(h){var g=this;return g.get("hasPermission")&&g.get("navBlock").hasClass("sort-pages")},value:false},layoutIds:{value:[]},navBlock:{lazyAdd:false,setter:function(h){var g=this;h=a.one(h);if(!h){h=a.Attribute.INVALID_VALUE}return h},value:null}},EXTENDS:a.Base,NAME:"navigation",prototype:{initializer:function(i){var g=this;var k=g.get("navBlock");if(k){g._updateURL=themeDisplay.getPathMain()+"/layout_management/update_page";var h=k.all("> ul > li");var j=g.get("layoutIds");h.each(function(m,l,n){m._LFR_layoutId=j[l]});g._makeAddable();g._makeDeletable();g._makeSortable();g._makeEditable();g.on("savePage",g._savePage);g.on("cancelPage",g._cancelPage);k.delegate("keypress",a.bind(g._onKeypress,g),"input")}},_addPage:function(h){var g=this;if(!h.shiftKey){Liferay.Dockbar.MenuManager.hideAll();Liferay.Dockbar.UnderlayManager.hideAll()}var j=g.get("navBlock");var i=a.Node.create(f);j.one("ul").append(i);g._createEditor(i,{prevVal:""})},_createEditor:function(g,u){var r=this;var v=r._prototypeMenuTemplate||"";v=v.replace(/name=\"template\"/g,'name="'+a.guid()+'_template"');var i=u.prevVal;if(u.actionNode){u.actionNode.hide()}var k=a.getDoc().on("click",function(w){k.detach();r.fire("cancelPage",u)});var n=function(x){k.detach();var w=x.type.split(":");w=w[1]||w[0];r.fire(w,u)};var s=[{handler:function(w){q.fire("savePage",u)},icon:"check",id:"save"}];if(v&&!i){s.unshift({activeState:true,handler:function(w){var y=this;w.halt();var x="show";if(y.StateInteraction.get("active")){x="hide"}q._optionsOverlay[x]()},icon:"gear",id:"options"})}var j=new a.Overlay({bodyContent:v,align:{node:g,points:["tl","bl"]},on:{visibleChange:function(x){var w=this;if(x.newVal){if(!w.get("rendered")){w.set("align.node",q.get("contentBox"));w.render()}}}},zIndex:200});var q=new a.Combobox({after:{destroy:function(w){r.fire("stopEditing")},render:function(w){r.fire("startEditing")}},field:{value:i},icons:s,on:{destroy:function(x){var w=this;if(j.get("rendered")){j.destroy()}}}}).render(g);if(v&&r._optionsOpen&&!i){var t=q.icons.item("options");t.StateInteraction.set("active",true);j.show()}var p=q._field;var o=q.get("contentBox");var m=j.get("boundingBox");var h=j.get("contentBox");u.listItem=g;u.comboBox=q;u.field=p;u.optionsOverlay=j;q.on("savePage",n);q.on("cancelPage",n);q._optionsOverlay=j;g._comboBox=q;m.setStyle("minWidth",g.get("offsetWidth")+"px");h.addClass("lfr-menu-list lfr-component lfr-page-templates");o.swallowEvent("click");h.swallowEvent("click");Liferay.Util.focusFormField(p.get("node"));var l=a.bind(j.fire,j,"align");j.on("visibleChange",l);r.on("stopEditing",l);r.on("startEditing",l);if(i){r.fire("editPage")}},_cancelPage:function(j){var g=this;var i=j.listItem;var l=j.comboBox;var k=j.field;var h=j.actionNode;if(h){h.show();k.resetValue()}else{i.remove(true)}l.destroy()},_deleteButton:function(h){var g=this;h.append(e)},_makeAddable:function(){var g=this;if(g.get("isModifiable")){var h=g.get("navBlock").one("ul");var k=themeDisplay.getPathThemeImages();var i=a.one("#layoutPrototypeTemplate");if(i){g._prototypeMenuTemplate=i.html()}if(g.get("hasPermission")){var j=a.one("#addPage");if(j){j.on("click",g._addPage,g)}}}},_makeDeletable:function(){var g=this;if(g.get("isModifiable")){var i=g.get("navBlock");var h=i.all("> ul > li").filter(":not(.selected)");i.delegate("click",a.bind(g._removePage,g),".delete-tab");i.delegate("mouseenter",a.rbind(g._toggleDeleteButton,g,"removeClass"),"li");i.delegate("mouseleave",a.rbind(g._toggleDeleteButton,g,"addClass"),"li");g._deleteButton(h)}},_makeEditable:function(){var g=this;if(g.get("isModifiable")){var j=g.get("navBlock").one("li.selected");if(j){var i=j.one("a");if(i){var h=i.one("span");if(h){i.on("click",function(k){if(k.shiftKey){k.halt()}});i.on("mouseenter",function(k){if(!themeDisplay.isStateMaximized()||k.shiftKey){h.setStyle("cursor","text")}});i.on("mouseleave",a.bind(h.setStyle,h,"cursor","pointer"));h.on("click",function(l){if(themeDisplay.isStateMaximized()&&!l.shiftKey){return}l.halt();var n=l.currentTarget;var k=n.get("parentNode");var m=n.text();g._createEditor(j,{actionNode:k,prevVal:m,textNode:n})})}}}}},_makeSortable:function(){var g=this;var i=g.get("navBlock");var h=new a.Sortable({container:i,moveType:"move",nodes:"li",opacity:".5",opacityNode:"currentNode"});h.delegate.on("drag:end",function(j){var k=j.target.get("node");g._saveSortables(k);Liferay.fire("navigation",{item:k.getDOM(),type:"sort"})});h.delegate.on("drag:start",function(j){var k=j.target.get("dragNode");k.addClass("lfr-navigation-proxy")});h.delegate.dd.removeInvalid("a")},_onKeypress:function(j){var g=this;var l=j.keyCode;if(l==13||l==27){var i=j.currentTarget.ancestor("li");var h="savePage";if(l==27){h="cancelPage"}var k=i._comboBox;k.fire(h)}},_removePage:function(i){var g=this;var h=i.currentTarget.ancestor("li");if(confirm('\u0041\u0072\u0065\u0020\u0079\u006f\u0075\u0020\u0073\u0075\u0072\u0065\u0020\u0079\u006f\u0075\u0020\u0077\u0061\u006e\u0074\u0020\u0074\u006f\u0020\u0064\u0065\u006c\u0065\u0074\u0065\u0020\u0074\u0068\u0069\u0073\u0020\u0070\u0061\u0067\u0065\u003f')){var j={cmd:"delete",doAsUserId:themeDisplay.getDoAsUserIdEncoded(),groupId:themeDisplay.getScopeGroupId(),layoutId:h._LFR_layoutId,privateLayout:themeDisplay.isPrivateLayout()};a.io.request(g._updateURL,{data:j,on:{success:function(){Liferay.fire("navigation",{item:h,type:"delete"});h.remove(true)}}})}},_savePage:function(h,m,i){var u=this;var g=h.listItem;var t=h.comboBox;var r=h.field;var s=h.actionNode;var j=h.textNode;var n=r.get("value");n=c.trim(n);var l=null;var p=null;if(n){if(s){if(r.isDirty()){l={cmd:"name",doAsUserId:themeDisplay.getDoAsUserIdEncoded(),groupId:themeDisplay.getScopeGroupId(),languageId:themeDisplay.getLanguageId(),layoutId:themeDisplay.getLayoutId(),name:n,privateLayout:themeDisplay.isPrivateLayout()};p=function(x,B,A){var y=this.get("responseData");var z=a.getDoc();j.text(n);s.show();t.destroy();var v=z.get("title");var w=new RegExp(r.get("prevVal"),"g");newTitle=v.replace(w,n);z.set("title",newTitle)}}else{t.fire("cancelPage")}}else{var k=t._optionsOverlay;var o=k.get("contentBox").one("input:checked");var q=o&&o.val();l={cmd:"add",doAsUserId:themeDisplay.getDoAsUserIdEncoded(),groupId:themeDisplay.getScopeGroupId(),layoutPrototypeId:q,mainPath:themeDisplay.getPathMain(),name:n,parentLayoutId:themeDisplay.getParentLayoutId(),privateLayout:themeDisplay.isPrivateLayout()};p=function(v,A,y){var w=this.get("responseData");var x=a.substitute(b,{url:w.url,pageTitle:n});var z=a.Node.create(x);z.setStyle("cursor","move");g._LFR_layoutId=w.layoutId;g.append(z);t.destroy();g.addClass("sortable-item");u._deleteButton(g);Liferay.fire("navigation",{item:g,type:"add"})}}if(l){a.io.request(u._updateURL,{data:l,dataType:"json",on:{success:p}})}}},_saveSortables:function(i){var g=this;var h=g.get("navBlock").all("li").indexOf(i);var j={cmd:"priority",doAsUserId:themeDisplay.getDoAsUserIdEncoded(),groupId:themeDisplay.getScopeGroupId(),layoutId:i._LFR_layoutId,priority:h,privateLayout:themeDisplay.isPrivateLayout()};a.io.request(g._updateURL,{data:j})},_toggleDeleteButton:function(h,i){var g=this;var j=h.currentTarget.one(".delete-tab");if(j){j[i]("aui-helper-hidden")}},_optionsOpen:true,_updateURL:""}});Liferay.Navigation=d},"",{requires:["aui-form-combobox","aui-io-request","dd-constrain","json-parse","node-event-simulate","overlay","selector-css3","sortable","substitute"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.2.0PR1
build: nightly
*/
YUI.add("sortable",function(A){var C=function(L){C.superclass.constructor.apply(this,arguments);},F="currentNode",D="opacityNode",I="container",E="id",J="zIndex",K="opacity",H="parentNode",G="nodes",B="node";A.extend(C,A.Base,{delegate:null,initializer:function(){var O="sortable-"+A.guid(),N,M={container:this.get(I),nodes:this.get(G),target:true,invalid:this.get("invalid"),dragConfig:{groups:[O]}},L;if(this.get("handles")){M.handles=this.get("handles");}L=new A.DD.Delegate(M);this.set(E,O);L.dd.plug(A.Plugin.DDProxy,{moveOnEnd:false,cloneNode:true});N=new A.DD.Drop({node:this.get(I),bubbleTarget:L,groups:L.dd.get("groups")}).on("drop:over",A.bind(this._onDropOver,this));L.on({"drag:start":A.bind(this._onDragStart,this),"drag:end":A.bind(this._onDragEnd,this),"drag:over":A.bind(this._onDragOver,this),"drag:drag":A.bind(this._onDrag,this)});this.delegate=L;C.reg(this);},_up:null,_y:null,_onDrag:function(L){if(L.pageY<this._y){this._up=true;}else{if(L.pageY>this._y){this._up=false;}}this._y=L.pageY;},_onDropOver:function(M){if(!M.drop.get(B).test(this.get(G))){var L=M.drop.get(B).all(this.get(G));if(L.size()===0){M.drop.get(B).append(M.drag.get(B));}}},_onDragOver:function(R){if(!R.drop.get(B).test(this.get(G))){return;}if(R.drag.get(B)==R.drop.get(B)){return;}if(R.drag.get(B).contains(R.drop.get(B))){return;}var S=false,M,Q,O,N,L,P=this.get("moveType").toLowerCase();if(R.drag.get(B).get(H).contains(R.drop.get(B))){S=true;}if(S&&P=="move"){P="insert";}switch(P){case"insert":M=((this._up)?"before":"after");L=R.drop.get(B);if(A.Sortable._test(L,this.get(I))){L.append(R.drag.get(B));}else{L.insert(R.drag.get(B),M);}break;case"swap":A.DD.DDM.swapNode(R.drag,R.drop);break;case"move":case"copy":N=A.Sortable.getSortable(R.drop.get(B).get(H));if(!N){return;}A.DD.DDM.getDrop(R.drag.get(B)).addToGroup(N.get(E));if(S){A.DD.DDM.swapNode(R.drag,R.drop);}else{if(this.get("moveType")=="copy"){Q=R.drag.get(B);O=Q.cloneNode(true);O.set(E,"");R.drag.set(B,O);N.delegate.createDrop(O,[N.get(E)]);Q.setStyles({top:"",left:""});}R.drop.get(B).insert(R.drag.get(B),"before");}break;}this.fire(P,{same:S,drag:R.drag,drop:R.drop});this.fire("moved",{same:S,drag:R.drag,drop:R.drop});},_onDragStart:function(L){this.delegate.get("lastNode").setStyle(J,"");this.delegate.get(this.get(D)).setStyle(K,this.get(K));this.delegate.get(F).setStyle(J,"999");},_onDragEnd:function(L){this.delegate.get(this.get(D)).setStyle(K,1);this.delegate.get(F).setStyles({top:"",left:""});this.sync();},plug:function(L,M){if(L&&L.NAME.substring(0,4).toLowerCase()==="sort"){this.constructor.superclass.plug.call(this,L,M);}else{this.delegate.dd.plug(L,M);}return this;},sync:function(){this.delegate.syncTargets();return this;},destructor:function(){this.delegate.destroy();C.unreg(this);},join:function(M,L){if(!(M instanceof A.Sortable)){A.error("Sortable: join needs a Sortable Instance");return this;}if(!L){L="full";}L=L.toLowerCase();var N="_join_"+L;if(this[N]){this[N](M);}return this;},_join_none:function(L){this.delegate.dd.removeFromGroup(L.get(E));L.delegate.dd.removeFromGroup(this.get(E));},_join_full:function(L){this.delegate.dd.addToGroup(L.get(E));L.delegate.dd.addToGroup(this.get(E));},_join_outer:function(L){this.delegate.dd.addToGroup(L.get(E));},_join_inner:function(L){L.delegate.dd.addToGroup(this.get(E));},getOrdering:function(M){var L=[];if(!A.Lang.isFunction(M)){M=function(N){return N;};}A.one(this.get(I)).all(this.get(G)).each(function(N){L.push(M(N));});return L;}},{NAME:"sortable",ATTRS:{handles:{value:false},container:{value:"body"},nodes:{value:".dd-draggable"},opacity:{value:".75"},opacityNode:{value:"currentNode"},id:{value:null},moveType:{value:"insert"},invalid:{value:""}},_sortables:[],_test:function(L,M){if(M instanceof A.Node){return(M===L);}else{return L.test(M);}},getSortable:function(M){var L=null;M=A.one(M);A.each(A.Sortable._sortables,function(N){if(A.Sortable._test(M,N.get(I))){L=N;}});return L;},reg:function(L){A.Sortable._sortables.push(L);},unreg:function(L){A.each(A.Sortable._sortables,function(N,M){if(N===L){A.Sortable._sortables[M]=null;delete C._sortables[M];}});}});A.Sortable=C;},"3.2.0PR1",{requires:["dd-delegate","dd-drop-plugin","dd-proxy"]});AUI().add("liferay-menu",function(a){var b=function(){var c=this;if(!arguments.callee._hasRun){arguments.callee._hasRun=true;c._body=a.getBody();c._document=a.getDoc();c._window=a.getWin();c._active={menu:null,trigger:null};if(Liferay.Layout){Liferay.Layout.on("drag:start",c._closeActiveMenu,c)}c._window.on("resize",c._positionActiveMenu,c);var d="aui-helper-hidden-accessible";c._body.delegate("click",function(g){var f=g.currentTarget;var i=f._AUI_MENU;if(!i){var h=f.one("ul");h.one("li:last-child").addClass("last");i=a.Node.create('<div class="lfr-component lfr-menu-list" />');i._hideClass=d;i.appendChild(h);i.hide();c._body.appendChild(i);Liferay.Util.createFlyouts({container:i.getDOM()});f._AUI_MENU=i}if(c._active.menu&&!c._active.menu.compareTo(i)){c._closeActiveMenu()}if(!i.hasClass(d)){c._closeActiveMenu()}else{c._active.menu=i;c._active.trigger=f;if(!i.focusManager){c._plugMenu(i,f)}c._positionActiveMenu()}g.halt();var e=f.one("a");if(e){e.setAttrs({"aria-haspopup":true,role:"button"})}},".lfr-actions");c._document.on("click",c._closeActiveMenu,c)}};b.prototype={_closeActiveMenu:function(){var c=this;if(c._active.menu){c._active.menu.hide();c._active.menu=null;c._active.trigger.removeClass("aui-state-active");c._active.trigger=null}},_plugMenu:function(f,e){var c=this;f.plug(a.Plugin.NodeFocusManager,{circular:true,descendants:"a",focusClass:"aui-focus",keys:{next:"down:40",previous:"down:38"}});var d=e.one("a");f.on("key",function(g){c._closeActiveMenu();if(d){d.focus()}},"down:27,9");f.delegate("mouseenter",function(h){var g=f.focusManager;if(g.get("focused")){g.focus(h.currentTarget.one("a"))}},"li");f.setAttrs({"aria-labelledby":(d&&d.get("id")),role:"menu"});f.all("a").set("role","menuitem")},_positionActiveMenu:function(){var q=this;var f=q._active.menu;var m=q._active.trigger;if(f){var j=m.get("region");cssClass=m.attr("className");var s="auto";var g="bottom";var i=q._window;if(cssClass.indexOf("right")>-1){s="right"}else{if(cssClass.indexOf("left")>-1){s="left"}}var o=f.get("offsetHeight");var e=f.get("offsetWidth");var n=j.height;var c=j.width;var u=o+j.top;var l=e+j.left;var h=i.get("scrollTop");var p=i.get("scrollLeft");var d=m.get("viewportRegion");var k=d.height+h;var t=d.width+p;if(s=="auto"){if(u>k&&!((j.top-o)<0)){j.top-=o}else{j.top+=n}if((l>t||((e/2)+j.left)>t/2)&&!((j.left-e)<0)){j.left-=(e-c)}}else{if(s=="right"){j.left-=(e-2)}else{if(s=="left"){j.left+=(c+2)}}j.top-=(o-n)}f.setStyle("position","absolute");f.setXY([j.left,j.top]);f.show();m.addClass("aui-state-active");q._active={menu:f,trigger:m};var r=f.one("a");if(r){r.focus()}}}};b.handleFocus=function(d){var c=a.one(d);if(c){c.delegate("mouseenter",a.rbind(b._targetLink,c,"focus"),"li");c.delegate("mouseleave",a.rbind(b._targetLink,c,"blur"),"li")}};b._targetLink=function(c,d){c.currentTarget.one("a")[d]()};Liferay.Menu=b},"",{requires:["aui-base","node-focusmanager","selector-css3"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.2.0PR1
build: nightly
*/
YUI.add("selector-css3",function(A){A.Selector._reNth=/^(?:([\-]?\d*)(n){1}|(odd|even)$)*([\-+]?\d*)$/;A.Selector._getNth=function(C,L,N,G){A.Selector._reNth.test(L);var K=parseInt(RegExp.$1,10),B=RegExp.$2,H=RegExp.$3,I=parseInt(RegExp.$4,10)||0,M=[],J=A.Selector._children(C.parentNode,N),E;if(H){K=2;E="+";B="n";I=(H==="odd")?1:0;}else{if(isNaN(K)){K=(B)?1:0;}}if(K===0){if(G){I=J.length-I+1;}if(J[I-1]===C){return true;}else{return false;}}else{if(K<0){G=!!G;K=Math.abs(K);}}if(!G){for(var D=I-1,F=J.length;D<F;D+=K){if(D>=0&&J[D]===C){return true;}}}else{for(var D=J.length-I,F=J.length;D>=0;D-=K){if(D<F&&J[D]===C){return true;}}}return false;};A.mix(A.Selector.pseudos,{"root":function(B){return B===B.ownerDocument.documentElement;},"nth-child":function(B,C){return A.Selector._getNth(B,C);},"nth-last-child":function(B,C){return A.Selector._getNth(B,C,null,true);},"nth-of-type":function(B,C){return A.Selector._getNth(B,C,B.tagName);},"nth-last-of-type":function(B,C){return A.Selector._getNth(B,C,B.tagName,true);},"last-child":function(C){var B=A.Selector._children(C.parentNode);return B[B.length-1]===C;},"first-of-type":function(B){return A.Selector._children(B.parentNode,B.tagName)[0]===B;},"last-of-type":function(C){var B=A.Selector._children(C.parentNode,C.tagName);return B[B.length-1]===C;},"only-child":function(C){var B=A.Selector._children(C.parentNode);return B.length===1&&B[0]===C;},"only-of-type":function(C){var B=A.Selector._children(C.parentNode,C.tagName);return B.length===1&&B[0]===C;},"empty":function(B){return B.childNodes.length===0;},"not":function(B,C){return !A.Selector.test(B,C);},"contains":function(B,C){var D=B.innerText||B.textContent||"";return D.indexOf(C)>-1;},"checked":function(B){return(B.checked===true||B.selected===true);},enabled:function(B){return(B.disabled!==undefined&&!B.disabled);},disabled:function(B){return(B.disabled);}});A.mix(A.Selector.operators,{"^=":"^{val}","$=":"{val}$","*=":"{val}"});A.Selector.combinators["~"]={axis:"previousSibling"};},"3.2.0PR1",{requires:["dom-base","selector-native","selector-css2"]});AUI().add("liferay-layout",function(a){var e=a.DD.DDM;var g=a.ClassNameManager.getClassName("dd","draggable");var c=a.cached(function(l){var j=a.one("#"+l);var h=j.one(".portlet-title");if(!h){h=Liferay.Layout.PROXY_NODE_ITEM.one(".portlet-title");var k=j.one(".portlet-title-default");var i="";if(k){i=k.html()}h.html(i)}return h.outerHTML()});var d={EMPTY_COLUMNS:{},OVER_NESTED_PORTLET:false,PROXY_NODE:a.Node.create('<div class="lfr-portlet-proxy aui-portal-layout-proxy"></div>'),PROXY_NODE_ITEM:a.Node.create('<div class="lfr-portlet-proxy aui-portal-layout-proxy"><div class="portlet-topper"><span class="portlet-title"></span></div></div>'),PORTLET_TOPPER:a.Node.create('<div class="portlet-topper"></div>'),init:function(h){d.options=h;d.isFreeForm=h.freeForm;d.PROXY_NODE.append(d.PORTLET_TOPPER);d.DEFAULT_LAYOUT_OPTIONS={delegateConfig:{dragConfig:{clickPixelThresh:0,clickTimeThresh:250,plugins:[{cfg:{horizontal:false,scrollDelay:30},fn:a.Plugin.DDWinScroll}]},handles:h.handles,invalid:h.invalid},dragNodes:h.dragNodes,dropContainer:function(i){return i.one(h.dropContainer)},dropNodes:h.dropNodes,lazyStart:true,on:{"drop:enter":function(i){Liferay.Layout.updateOverNestedPortletInfo()},"drop:exit":function(i){Liferay.Layout.updateOverNestedPortletInfo()},placeholderAlign:function(x){var p=x.currentTarget;var A=p.activeDrop;var k=p.lastActiveDrop;if(k){var t=A.get("node");var j=k.get("node");var v=p.quadrant;var s=t.isStatic;if(s){var q=(s=="start");var o=(q?"nextSibling":"previousSibling");var u=Liferay.Layout.findSiblingPortlet(t,o);var y=(u&&(u.isStatic==s));if(y||(q&&(v<=2))||(!q&&(v>=3))){x.halt()}}var z=!t.drop;if(!d.OVER_NESTED_PORTLET&&z){var n=t.get("id");var l=d.EMPTY_COLUMNS[n];if(!l){if(t!=j){var w=Liferay.Layout.getLastPortletNode(t);if(w.isStatic){var m=Liferay.Layout.options;var i=t.one(m.dropContainer);var B=Liferay.Layout.findReferencePortlet(i);if(B){w=B}}var r=e.getDrop(w);if(r){p.quadrant=4;p.activeDrop=r;p.lastAlignDrop=r}p._syncPlaceholderUI()}x.halt()}}if(d.OVER_NESTED_PORTLET&&(t==j)){x.halt()}}}},proxy:{resizeFrame:false}};if(h.freeForm){d.initFreeFormLayoutHandler()}else{d.initColumnLayoutHandler()}d.bindDragDropListeners();d.updateEmptyColumnsInfo();Liferay.on("closePortlet",d._onPortletClose)},bindDragDropListeners:function(){var h=d.layoutHandler;h.on("drag:end",a.bind(d._onPortletDragEnd,d));h.on("drag:start",a.bind(d._onPortletDragStart,d))},getLastPortletNode:function(j){var h=this;var i=j.all(Liferay.Layout.options.portletBoundary);var k=i.size()-1;return i.item(k)},findIndex:function(j){var i=d.options;var h=j.get("parentNode");return h.all("> "+i.portletBoundary).indexOf(j)},findReferencePortlet:function(m){var l=Liferay.Layout.options.portletBoundary;var j=m.all(">"+l);var n=j.item(0);if(n){var i=null;var k=null;var h=n.isStatic;if(!h||(h=="end")){k=n}else{j.each(function(p){var o=p.isStatic;if(!o||(i&&o&&(o!=i))){k=p}i=o})}}return k},findSiblingPortlet:function(i,k){var h=Liferay.Layout.options.dragNodes;var j=i.get(k);while(j&&!j.test(h)){j=j.get(k)}return j},fire:function(){var h=d.layoutHandler;if(h){return h.fire.apply(h,arguments)}},getPortlets:function(){var h=d.options;return a.all(h.dragNodes)},hasMoved:function(k){var j=false;var l=d.curPortletInfo;if(l){var h=d.findIndex(k);var i=k.get("parentNode");if((l.originalParent!=i)||(l.originalIndex!=h)){j=true}}return j},hasPortlets:function(i){var h=d.options;return !!i.one(h.portletBoundary)},initColumnLayoutHandler:function(){var h=a.merge(d.DEFAULT_LAYOUT_OPTIONS,{after:{"drag:start":function(j){var i=e.activeDrag.get("node");var k=i.get("id");d.PORTLET_TOPPER.html(c(k))}}});d.layoutHandler=new d.ColumnLayout(h);d.syncDraggableClassUI()},initFreeFormLayoutHandler:function(){var h=a.merge(d.DEFAULT_LAYOUT_OPTIONS,{after:{"drag:start":function(l){var i=this;var j=i.get("proxyNode");var k=e.activeDrag.get("node");var m=k.get("id");j.one(".portlet-topper").html(c(m))}},delegateConfig:{dragConfig:{startCentered:false}},lazyStart:false,on:{}});d.layoutHandler=new d.FreeFormLayout(h)},on:function(){var h=d.layoutHandler;if(h){return h.on.apply(h,arguments)}},refresh:function(i){var h=d.layoutHandler;i=a.one(i);if(i){h.delegate.syncTargets();Liferay.Layout.updatePortletDropZones(i)}},saveIndex:function(j,l){var i=Liferay.Util.getColumnId(l.get("id"));var k=Liferay.Util.getPortletId(j.get("id"));var h=d.findIndex(j);if(d.hasMoved(j)){d.saveLayout({cmd:"move",p_p_col_id:i,p_p_col_pos:h,p_p_id:k})}},saveLayout:function(h){var i={doAsUserId:themeDisplay.getDoAsUserIdEncoded(),p_l_id:themeDisplay.getPlid()};a.mix(i,h);a.io.request(themeDisplay.getPathMain()+"/portal/update_layout",{data:i})},syncDraggableClassUI:function(){var i=d.options;if(i.dragNodes){var h=a.all(i.dragNodes);if(i.invalid){h=h.filter(":not("+i.invalid+")")}h.addClass(g)}},syncEmptyColumnClassUI:function(l){var p=d.options;var i=d.curPortletInfo;if(i){var n=p.emptyColumnClass;var k=i.originalParent;var h=d.hasPortlets(l);var m=d.hasPortlets(k);var o=l.ancestor(d.options.dropNodes).get("id");var j=k.ancestor(d.options.dropNodes).get("id");d.EMPTY_COLUMNS[o]=!h;d.EMPTY_COLUMNS[j]=!m;l.toggleClass(n,!h);k.toggleClass(n,!m)}},updateCurrentPortletInfo:function(i){var h=d.options;d.curPortletInfo={node:i,originalIndex:d.findIndex(i),originalParent:i.get("parentNode"),siblingsPortlets:i.siblings(h.portletBoundary)}},updateEmptyColumnsInfo:function(){var h=d.options;a.all(h.dropNodes).each(function(i){var j=i.get("id");d.EMPTY_COLUMNS[j]=!d.hasPortlets(i)})},updateOverNestedPortletInfo:function(){var j=e.activeDrop;var k=d.options.nestedPortletId;if(j){var i=j.get("node");var h=i.get("id");d.OVER_NESTED_PORTLET=(h.indexOf(k)>-1)}},updatePortletDropZones:function(j){var h=d.options;var i=j.all(h.dropNodes);i.each(function(k){d.layoutHandler.addDropNode(k)})},_onPortletClose:function(j){var k=j.portlet;var i=k.portletId;var h=k.ancestor(d.options.dropContainer);d.updateCurrentPortletInfo(k);if(h){d.syncEmptyColumnClassUI(h)}},_onPortletDragEnd:function(i){var j=i.target.get("node");var h=j.get("parentNode");d.saveIndex(j,h);d.syncEmptyColumnClassUI(h)},_onPortletDragStart:function(h){var i=h.target.get("node");d.updateCurrentPortletInfo(i)}};var b=a.Component.create({ATTRS:{proxyNode:{value:d.PROXY_NODE}},NAME:"ColumnLayout",EXTENDS:a.PortalLayout,prototype:{dragItem:0,_positionNode:function(l){var h=this;var m=l.currentTarget;var k=m.lastAlignDrop||m.activeDrop;if(k){var j=k.get("node");var i=j.isStatic;if(i){var n=(i=="start");m.quadrant=(n?4:1)}b.superclass._positionNode.apply(this,arguments)}},_syncProxyNodeSize:function(){var h=this;var j=e.activeDrag.get("dragNode");var i=h.get("proxyNode");if(i&&j){j.set("offsetHeight",30);j.set("offsetWidth",200);i.set("offsetHeight",30);i.set("offsetWidth",200)}}}});var f=a.Component.create({ATTRS:{proxyNode:{value:Liferay.Template.PORTLET}},EXTENDS:b,NAME:"FreeFormLayout",prototype:{portletZIndex:100,initializer:function(){var h=this;var i=h.get("placeholder");if(i){i.addClass(d.options.freeformPlaceholderClass)}d.getPortlets().each(function(k,j,l){h._setupNodeResize(k);h._setupNodeStack(k)})},alignPortlet:function(j,i){var h=this;j.setXY(i.getXY());h.savePosition(j)},savePosition:function(h){var i=Liferay.Util.getPortletId(h.get("id"));d.saveLayout({cmd:"drag",height:h.getStyle("height"),left:h.getStyle("left"),p_p_id:i,top:h.getStyle("top"),width:h.getStyle("width")})},_onPortletMouseDown:function(i){var h=this;var j=i.currentTarget;j.setStyle("zIndex",h.portletZIndex++)},_positionNode:function(k){var h=this;var m=e.activeDrag;var l=m.get("dragNode");var i=m.get("node");var j=h.activeDrop;if(j){f.superclass._positionNode.apply(this,arguments)}l.setStyle("display","block");h.alignPortlet(i,l);l.setStyle("display","none")},_setupNodeResize:function(k){var h=this;var j=k.hasClass("aui-resize");if(!j){var i=new a.Resize({after:{end:function(m){var o=m.info;var l=this.get("node");var n=l.one(".portlet");if(n){n.set("offsetHeight",o.height)}h.savePosition(l)}},handles:"r,br,b",node:k,proxy:true})}},_setupNodeStack:function(i){var h=this;i.on("mousedown",a.bind(h._onPortletMouseDown,h))},_syncProxyNodeSize:function(){var h=this;var l=e.activeDrag.get("node");var j=h.get("proxyNode");if(j){var i=l.get("offsetHeight");var k=l.get("offsetWidth");j.set("offsetHeight",i);j.set("offsetWidth",k)}}}});d.ColumnLayout=b;d.FreeFormLayout=f;Liferay.Layout=d},"",{requires:["aui-io-request","aui-portal-layout","aui-resize","dd"],use:[]});AUI.add("aui-io-request",function(O){var G=O.Lang,d=G.isBoolean,Q=G.isFunction,H=G.isString,f=YUI.AUI.namespace("defaults.io"),h=function(A){return function(){return f[A];};},W="active",C="arguments",X="autoLoad",T="cache",g="cfg",S="complete",m="content-type",Y="context",N="data",F="dataType",J="",l="end",b="failure",B="form",U="get",K="headers",k="IORequest",E="json",Z="method",V="responseData",a="start",M="success",c="sync",R="timeout",P="transaction",e="uri",j="xdr",n="xml",i="Parser error: IO dataType is not correctly parsing",D={all:"*/*",html:"text/html",json:"application/json, text/javascript",text:"text/plain",xml:"application/xml, text/xml"};var I=O.Component.create({NAME:k,ATTRS:{autoLoad:{value:true,validator:d},cache:{value:true,validator:d},dataType:{setter:function(A){return(A||J).toLowerCase();},value:null,validator:H},responseData:{setter:function(A){return this._setResponseData(A);},value:null},uri:{setter:function(A){return this._parseURL(A);},value:null,validator:H},active:{value:false,validator:d},cfg:{getter:function(){var A=this;return{arguments:A.get(C),context:A.get(Y),data:A.get(N),form:A.get(B),headers:A.get(K),method:A.get(Z),on:{complete:O.bind(A.fire,A,S),end:O.bind(A._end,A),failure:O.bind(A.fire,A,b),start:O.bind(A.fire,A,a),success:O.bind(A._success,A)},sync:A.get(c),timeout:A.get(R),xdr:A.get(j)};},readOnly:true},transaction:{value:null},arguments:{valueFn:h(C)},context:{valueFn:h(Y)},data:{valueFn:h(N),setter:"_setIOData"},form:{valueFn:h(B)},headers:{getter:function(o){var p=[];var A=this;var L=A.get(F);if(L){p.push(D[L]);}p.push(D.all);return O.merge(o,{Accept:p.join(", ")});},valueFn:h(K)},method:{valueFn:h(Z)},sync:{valueFn:h(c)},timeout:{valueFn:h(R)},xdr:{valueFn:h(j)}},EXTENDS:O.Plugin.Base,prototype:{init:function(L){var A=this;I.superclass.init.apply(this,arguments);A._autoStart();},destructor:function(){var A=this;A.stop();A.set(P,null);},start:function(){var A=this;A.destructor();A.set(W,true);var L=O.io(A.get(e),A.get(g));A.set(P,L);},stop:function(){var A=this;var L=A.get(P);if(L){L.abort();}},_autoStart:function(){var A=this;if(A.get(X)){A.start();}},_parseURL:function(p){var A=this;var L=A.get(T);var s=A.get(Z);if((L===false)&&(s==U)){var r=+new Date;var o=p.replace(/(\?|&)_=.*?(&|$)/,"$1_="+r+"$2");p=o+((o==p)?(p.match(/\?/)?"&":"?")+"_="+r:"");}var q=f.uriFormatter;if(Q(q)){p=q.apply(A,[p]);}return p;},_end:function(L){var A=this;A.set(W,false);A.set(P,null);A.fire(l,L);},_success:function(o,L){var A=this;A.set(V,L);A.fire(M,o,L);},_setIOData:function(o){var A=this;var L=f.dataFormatter;if(Q(L)){o=L.call(A,o);}return o;},_setResponseData:function(q){var o=null;var A=this;if(q){var L=A.get(F);var r=q.getResponseHeader(m);if((L==n)||(!L&&r.indexOf(n)>=0)){o=q.responseXML;if(o.documentElement.tagName=="parsererror"){throw i;}}else{o=q.responseText;}if(o===J){o=null;}if(L==E){try{o=O.JSON.parse(o);}catch(p){}}}return o;}}});O.IORequest=I;O.io.request=function(L,A){return new O.IORequest(O.merge(A,{uri:L}));};},"1.0.1",{requires:["aui-base","io-base","json","plugin","querystring-stringify"]});AUI.add("aui-io-plugin",function(T){var P=T.Lang,Q=P.isBoolean,R=P.isString,U=function(A){return(A instanceof T.Node);},V=T.WidgetStdMod,D="Node",N="Widget",e="",E="failure",H="failureMessage",X="host",I="icon",J="io",F="IOPlugin",W="loading",G="loadingMask",d="node",a="parseContent",M="queue",C="rendered",O="section",c="showLoading",Z="success",S="type",B="where",Y=T.ClassNameManager.getClassName,K=Y(I,W);var b=T.Component.create({NAME:F,NS:J,ATTRS:{node:{value:null,getter:function(g){var A=this;if(!g){var f=A.get(X);var L=A.get(S);if(L==D){g=f;}else{if(L==N){var h=A.get(O);if(!f.getStdModNode(h)){f.setStdModContent(h,e);}g=f.getStdModNode(h);}}}return T.one(g);},validator:U},failureMessage:{value:"Failed to retrieve content",validator:R},loadingMask:{value:{}},parseContent:{value:true,validator:Q},showLoading:{value:true,validator:Q},section:{value:V.BODY,validator:function(A){return(!A||A==V.BODY||A==V.HEADER||A==V.FOOTER);}},type:{readOnly:true,valueFn:function(){var A=this;var L=D;if(A.get(X) instanceof T.Widget){L=N;}return L;},validator:R},where:{value:V.REPLACE,validator:function(A){return(!A||A==V.AFTER||A==V.BEFORE||A==V.REPLACE);}}},EXTENDS:T.IORequest,prototype:{bindUI:function(){var A=this;A.on("activeChange",A._onActiveChange);A.on(Z,A._successHandler);A.on(E,A._failureHandler);if((A.get(S)==N)&&A.get(c)){var L=A.get(X);L.after("heightChange",A._syncLoadingMaskUI,A);L.after("widthChange",A._syncLoadingMaskUI,A);}},_autoStart:function(){var A=this;A.bindUI();b.superclass._autoStart.apply(this,arguments);},_bindParseContent:function(){var A=this;var L=A.get(d);if(L&&!L.ParseContent&&A.get(a)){L.plug(T.Plugin.ParseContent);}},hideLoading:function(){var A=this;var L=A.get(d);if(L.loadingmask){L.loadingmask.hide();}},setContent:function(L){var A=this;A._bindParseContent();A._getContentSetterByType().apply(A,[L]);if(A.overlayMaskBoundingBox){A.overlayMaskBoundingBox.remove();}},showLoading:function(){var A=this;var L=A.get(d);if(L.loadingmask){if(A.overlayMaskBoundingBox){L.append(A.overlayMaskBoundingBox);}}else{L.plug(T.LoadingMask,A.get(G));A.overlayMaskBoundingBox=L.loadingmask.overlayMask.get("boundingBox");}L.loadingmask.show();},start:function(){var A=this;var L=A.get(X);if(!L.get(C)){L.after("render",function(){A._setLoadingUI(true);});}b.superclass.start.apply(A,arguments);},_getContentSetterByType:function(){var A=this;var L={Node:function(h){var f=this;var g=f.get(d);g.setContent.apply(g,[h]);},Widget:function(h){var f=this;var g=f.get(X);g.setStdModContent.apply(g,[f.get(O),h,f.get(B)]);}};return L[this.get(S)];},_setLoadingUI:function(L){var A=this;if(A.get(c)){if(L){A.showLoading();}else{A.hideLoading();}}},_syncLoadingMaskUI:function(){var A=this;A.get(d).loadingmask.refreshMask();},_successHandler:function(L,g,f){var A=this;A.setContent(f.responseText);},_failureHandler:function(L,g,f){var A=this;A.setContent(A.get(H));},_onActiveChange:function(f){var A=this;
var L=A.get(X);var g=A.get(S)==N;if(!g||(g&&L&&L.get(C))){A._setLoadingUI(f.newVal);}}}});T.namespace("Plugin").IO=b;},"1.0.1",{requires:["aui-overlay-base","aui-parse-content","aui-io-request","aui-loading-mask"]});AUI.add("aui-io",function(B){},"1.0.1",{skinnable:false,use:["aui-io-request","aui-io-plugin"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.2.0PR1
build: nightly
*/
YUI.add("io-base",function(D){var d="io:start",P="io:complete",B="io:success",F="io:failure",e="io:end",X=0,O={"X-Requested-With":"XMLHttpRequest"},Z={},K=D.config.win;function L(){return K.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");}function E(){var Y=X;X++;return Y;}function W(g,Y){var f={};f.id=D.Lang.isNumber(Y)?Y:E();g=g||{};if(!g.use&&!g.upload){f.c=L();}else{if(g.use){if(g.use==="native"){if(K.XDomainRequest){f.c=new XDomainRequest();f.t=g.use;}else{f.c=L();}}else{f.c=D.io._transport[g.use];f.t=g.use;}}else{f.c={};}}return f;}function I(Y){if(K&&K.XMLHttpRequest){if(Y.c){Y.c.onreadystatechange=null;}}Y.c=null;Y=null;}function Q(h,i){var g=new D.EventTarget().publish("transaction:"+h),Y=i.arguments,f=i.context||D;if(Y){g.on(i.on[h],f,Y);}else{g.on(i.on[h],f);}return g;}function U(g,f){var Y=f.arguments;if(Y){D.fire(d,g,Y);}else{D.fire(d,g);}if(f.on&&f.on.start){Q("start",f).fire(g);}}function G(g,h){var f=g.e?{status:0,statusText:g.e}:g.c,Y=h.arguments;if(Y){D.fire(P,g.id,f,Y);}else{D.fire(P,g.id,f);}if(h.on&&h.on.complete){Q("complete",h).fire(g.id,f);}}function J(f,g){var Y=g.arguments;if(Y){D.fire(e,f.id,Y);}else{D.fire(e,f.id);}if(g.on&&g.on.end){Q("end",g).fire(f.id);}I(f);}function T(f,g){var Y=g.arguments;if(Y){D.fire(B,f.id,f.c,Y);}else{D.fire(B,f.id,f.c);}if(g.on&&g.on.success){Q("success",g).fire(f.id,f.c);}J(f,g);}function H(g,h){var f=g.e?{status:0,statusText:g.e}:g.c,Y=h.arguments;if(Y){D.fire(F,g.id,f,Y);}else{D.fire(F,g.id,f);}if(h.on&&h.on.failure){Q("failure",h).fire(g.id,f);}J(g,h);}function A(g,Y,h,f){I(g);h.xdr.use="flash";h.data=h.form&&f?f:null;return D.io(Y,h,g.id);}function R(Y,f){Y+=((Y.indexOf("?")==-1)?"?":"&")+f;return Y;}function V(Y,f){if(f){O[Y]=f;}else{delete O[Y];}}function C(g,Y){var f;Y=Y||{};for(f in O){if(O.hasOwnProperty(f)){if(Y[f]){continue;}else{Y[f]=O[f];}}}for(f in Y){if(Y.hasOwnProperty(f)){g.setRequestHeader(f,Y[f]);}}}function N(f,Y){if(f&&f.c){f.e=Y;f.c.abort();}}function S(f,Y){Z[f.id]=K.setTimeout(function(){N(f,"timeout");},Y);}function M(Y){K.clearTimeout(Z[Y]);delete Z[Y];}function b(g,h){var Y;try{if(g.c.status&&g.c.status!==0){Y=g.c.status;}else{Y=0;}}catch(f){Y=0;}if(Y>=200&&Y<300||Y===1223){T(g,h);}else{H(g,h);}}function c(Y,f){if(Y.c.readyState===4){if(f.timeout){M(Y.id);}K.setTimeout(function(){G(Y,f);b(Y,f);},0);}}function a(h,w,p){var q,g,t,k,Y,AA,n,y,l,z=h;w=D.Object(w);g=W(w.xdr||w.form,p);k=w.method?w.method=w.method.toUpperCase():w.method="GET";AA=w.sync;n=w.data;if(D.Lang.isObject(w.data)&&D.QueryString){w.data=D.QueryString.stringify(w.data);}if(w.form){if(w.form.upload){return D.io.upload(g,h,w);}else{q=D.io._serialize(w.form,w.data);if(k==="POST"||k==="PUT"){w.data=q;}else{if(k==="GET"){h=R(h,q);}}}}if(w.data&&k==="GET"){h=R(h,w.data);}if(w.data&&k==="POST"){w.headers=D.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},w.headers);}if(g.t){return D.io.xdr(h,g,w);}if(!AA){g.c.onreadystatechange=function(){c(g,w);};}try{g.c.open(k,h,AA?false:true);if(w.xdr&&w.xdr.credentials){g.c.withCredentials=true;}}catch(x){if(w.xdr){return A(g,z,w,n);}}C(g.c,w.headers);U(g.id,w);try{g.c.send(w.data||"");if(AA){t=g.c;y=["status","statusText","responseText","responseXML"];Y=w.arguments?{id:g.id,arguments:w.arguments}:{id:g.id};for(l=0;l<4;l++){Y[y[l]]=g.c[y[l]];}Y.getAllResponseHeaders=function(){return t.getAllResponseHeaders();};Y.getResponseHeader=function(f){return t.getResponseHeader(f);};G(g,w);b(g,w);return Y;}}catch(v){if(w.xdr){return A(g,z,w,n);}}if(w.timeout){S(g,w.timeout);}return{id:g.id,abort:function(){return g.c?N(g,"abort"):false;},isInProgress:function(){return g.c?g.c.readyState!==4&&g.c.readyState!==0:false;}};}a.start=U;a.complete=G;a.success=T;a.failure=H;a.end=J;a._id=E;a._timeout=Z;a.header=V;D.io=a;D.io.http=a;},"3.2.0PR1",{optional:["querystring-stringify-simple"],requires:["event-custom-base"]});YUI.add("io-form",function(B){var A=encodeURIComponent;B.mix(B.io,{_serialize:function(M,R){var I=[],N=M.useDisabled||false,Q=0,C=(typeof M.id==="string")?M.id:M.id.getAttribute("id"),K,J,E,P,L,H,O,F,G,D;if(!C){C=B.guid("io:");M.id.setAttribute("id",C);}J=B.config.doc.getElementById(C);for(H=0,O=J.elements.length;H<O;++H){K=J.elements[H];L=K.disabled;E=K.name;if(N?E:E&&!L){E=A(E)+"=";P=A(K.value);switch(K.type){case"select-one":if(K.selectedIndex>-1){D=K.options[K.selectedIndex];I[Q++]=E+A(D.attributes.value&&D.attributes.value.specified?D.value:D.text);}break;case"select-multiple":if(K.selectedIndex>-1){for(F=K.selectedIndex,G=K.options.length;F<G;++F){D=K.options[F];if(D.selected){I[Q++]=E+A(D.attributes.value&&D.attributes.value.specified?D.value:D.text);}}}break;case"radio":case"checkbox":if(K.checked){I[Q++]=E+P;}break;case"file":case undefined:case"reset":case"button":break;case"submit":default:I[Q++]=E+P;}}}return R?I.join("&")+"&"+R:I.join("&");}},true);},"3.2.0PR1",{requires:["io-base","node-base"]});YUI.add("io-xdr",function(C){var K=C.publish("io:xdrReady",{fireOnce:true}),F={},G={},B=L&&L.XDomainRequest,J=C.config.doc,L=C.config.win;function H(M,P){var N='<object id="yuiIoSwf" type="application/x-shockwave-flash" data="'+M+'" width="0" height="0">'+'<param name="movie" value="'+M+'">'+'<param name="FlashVars" value="yid='+P+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",O=J.createElement("div");J.body.appendChild(O);O.innerHTML=N;}function A(M,N){M.c.onprogress=function(){G[M.id]=3;};M.c.onload=function(){G[M.id]=4;C.io.xdrResponse(M,N,"success");};M.c.onerror=function(){G[M.id]=4;C.io.xdrResponse(M,N,"failure");};if(N.timeout){M.c.ontimeout=function(){G[M.id]=4;C.io.xdrResponse(M,N,"timeout");};M.c.timeout=N.timeout;}}function D(Q,P,N){var O,M;if(!Q.e){O=P?decodeURI(Q.c.responseText):Q.c.responseText;M=N==="xml"?C.DataType.XML.parse(O):null;return{id:Q.id,c:{responseText:O,responseXML:M}};}else{return{id:Q.id,status:Q.e};}}function I(M,N){return M.c.abort(M.id,N);}function E(M){return B?G[M.id]!==4:M.c.isInProgress(M.id);}C.mix(C.io,{_transport:{},xdr:function(M,N,O){if(O.on&&O.xdr.use==="flash"){F[N.id]={on:O.on,context:O.context,arguments:O.arguments};
O.context=null;O.form=null;N.c.send(M,O,N.id);}else{if(B){A(N,O);N.c.open(O.method||"GET",M);N.c.send(O.data);}else{N.c.send(M,N,O);}}return{id:N.id,abort:function(){return N.c?I(N,O):false;},isInProgress:function(){return N.c?E(N.id):false;}};},xdrResponse:function(R,S,Q){var N,M=B?G:F,P=S.xdr.use==="flash"?true:false,O=S.xdr.dataType;S.on=S.on||{};if(P){N=F[R.id]?F[R.id]:null;if(N){S.on=N.on;S.context=N.context;S.arguments=N.arguments;}}switch(Q.toLowerCase()){case"start":C.io.start(R.id,S);break;case"complete":C.io.complete(R,S);break;case"success":C.io.success(O||P?D(R,P,O):R,S);delete M[R.id];break;case"timeout":case"abort":case"failure":if(Q===("abort"||"timeout")){R.e=Q;}C.io.failure(O||P?D(R,P,O):R,S);delete M[R.id];break;}},xdrReady:function(M){C.fire(K,M);},transport:function(M){var N=M.yid?M.yid:C.id;M.id=M.id||"flash";if(M.id==="native"||M.id==="flash"){H(M.src,N);this._transport.flash=J.getElementById("yuiIoSwf");}else{this._transport[M.id]=M.src;}}});},"3.2.0PR1",{requires:["io-base","datatype-xml"]});YUI.add("io-upload-iframe",function(C){var L=C.config.win,G=C.config.doc,I=(G.documentMode&&G.documentMode===8);function E(S,R){var T=[],O=R.split("="),Q,P;for(Q=0,P=O.length-1;Q<P;Q++){T[Q]=G.createElement("input");T[Q].type="hidden";T[Q].name=O[Q].substring(O[Q].lastIndexOf("&")+1);T[Q].value=(Q+1===P)?O[Q+1]:O[Q+1].substring(0,(O[Q+1].lastIndexOf("&")));S.appendChild(T[Q]);}return T;}function H(Q,R){var P,O;for(P=0,O=R.length;P<O;P++){Q.removeChild(R[P]);}}function F(P,Q,O){P.setAttribute("action",O);P.setAttribute("method","POST");P.setAttribute("target","ioupload"+Q);P.setAttribute(C.UA.ie&&!I?"encoding":"enctype","multipart/form-data");}function N(P,O){var Q;for(Q in O){if(O.hasOwnProperty(O,Q)){if(O[Q]){P.setAttribute(Q,P[Q]);}else{P.removeAttribute(Q);}}}}function D(O,P){C.io._timeout[O.id]=L.setTimeout(function(){var Q={id:O.id,status:"timeout"};C.io.complete(Q,P);C.io.end(Q,P);},P.timeout);}function K(O){L.clearTimeout(C.io._timeout[O]);delete C.io._timeout[O];}function J(O){C.Event.purgeElement("#ioupload"+O,false);C.one("body").removeChild(C.one("#ioupload"+O));}function A(R,S){var Q=C.one("#ioupload"+R.id).get("contentWindow.document"),O=Q.one("body"),P;if(S.timeout){K(R.id);}if(O){P=O.query("pre:first-child");R.c.responseText=P?P.get("text"):O.get("text");}else{R.c.responseXML=Q._node;}C.io.complete(R,S);C.io.end(R,S);L.setTimeout(function(){J(R.id);},0);}function M(P,Q){var O=C.Node.create('<iframe id="ioupload'+P.id+'" name="ioupload'+P.id+'" />');O._node.style.position="absolute";O._node.style.top="-1000px";O._node.style.left="-1000px";C.one("body").appendChild(O);C.on("load",function(){A(P,Q);},"#ioupload"+P.id);}function B(S,Q,T){var R=(typeof T.form.id==="string")?G.getElementById(T.form.id):T.form.id,P,O={action:R.getAttribute("action"),target:R.getAttribute("target")};F(R,S.id,Q);if(T.data){P=E(R,T.data);}if(T.timeout){D(S,T);}R.submit();C.io.start(S.id,T);if(T.data){H(R,P);}N(R,O);return{id:S.id,abort:function(){var U={id:S.id,status:"abort"};if(C.one("#ioupload"+S.id)){J(S.id);C.io.complete(U,T);C.io.end(U,T);}else{return false;}},isInProgress:function(){return C.one("#ioupload"+S.id)?true:false;}};}C.mix(C.io,{upload:function(P,O,Q){M(P,Q);return B(P,O,Q);}});},"3.2.0PR1",{requires:["io-base","node-base"]});YUI.add("io-queue",function(B){var A=new B.Queue(),G,L=1;function F(){var M=A.next();G=M.id;L=0;B.io(M.uri,M.cfg,M.id);}function D(M){A.promote(M);}function I(M,O){var N={uri:M,id:B.io._id(),cfg:O};A.add(N);if(L===1){F();}return N;}function C(M){L=1;if(G===M&&A.size()>0){F();}}function K(M){A.remove(M);}function E(){L=1;if(A.size()>0){F();}}function H(){L=0;}function J(){return A.size();}I.size=J;I.start=E;I.stop=H;I.promote=D;I.remove=K;B.on("io:complete",function(M){C(M);},B.io);B.mix(B.io,{queue:I},true);},"3.2.0PR1",{requires:["io-base","queue-promote"]});YUI.add("io",function(A){},"3.2.0PR1",{use:["io-base","io-form","io-xdr","io-upload-iframe","io-queue"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.2.0PR1
build: nightly
*/
YUI.add("datatype-xml-parse",function(B){var A=B.Lang;B.mix(B.namespace("DataType.XML"),{parse:function(E){var D=null;if(A.isString(E)){try{if(!A.isUndefined(DOMParser)){D=new DOMParser().parseFromString(E,"text/xml");}}catch(F){try{if(!A.isUndefined(ActiveXObject)){D=new ActiveXObject("Microsoft.XMLDOM");D.async=false;D.loadXML(E);}}catch(C){}}}if((A.isNull(D))||(A.isNull(D.documentElement))||(D.documentElement.nodeName==="parsererror")){}return D;}});B.namespace("Parsers").xml=B.DataType.XML.parse;},"3.2.0PR1");YUI.add("datatype-xml-format",function(B){var A=B.Lang;B.mix(B.namespace("DataType.XML"),{format:function(C){try{if(!A.isUndefined(XMLSerializer)){return(new XMLSerializer()).serializeToString(C);}}catch(D){if(C&&C.xml){return C.xml;}else{return(A.isValue(C)&&C.toString)?C.toString():"";}}}});},"3.2.0PR1");YUI.add("datatype-xml",function(A){},"3.2.0PR1",{use:["datatype-xml-parse","datatype-xml-format"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.2.0PR1
build: nightly
*/
YUI.add("queue-promote",function(A){A.mix(A.Queue.prototype,{indexOf:function(B){return A.Array.indexOf(this._q,B);},promote:function(C){var B=this.indexOf(C);if(B>-1){this._q.unshift(this._q.splice(B,1));}},remove:function(C){var B=this.indexOf(C);if(B>-1){this._q.splice(B,1);}}});},"3.2.0PR1",{requires:["yui-base"]});AUI.add("aui-resize",function(Ae){var AO=Ae.Lang,F=AO.isArray,Aw=AO.isBoolean,AC=AO.isNumber,A0=AO.isString,As=AO.trim,V=Ae.Array.indexOf,AX=".",g=",",e=" ",d="active",AA="activeHandle",AI="activeHandleEl",k="all",BA="auto",Ah="autoHide",An="bottom",Ai="className",o="constrain",Al="cursor",U="diagonal",Am="dotted",AY="dragCursor",D="grip",AR="gripsmall",m="handle",z="handles",AV="hidden",C="horizontal",AT="icon",j="inner",E="left",y="margin",a="maxHeight",A1="maxWidth",W="minHeight",AE="minWidth",c="node",s="nodeName",AM="none",v="offsetHeight",Az="offsetWidth",I="parentNode",Y="position",X="preserveRatio",Aq="proxy",l="proxyEl",AP="px",K="region",Q="relative",Af="resize",b="resizing",N="right",A5="static",Ar="tickX",Ao="tickY",P="top",Ac="vertical",r="view",AH="viewportRegion",Aj="wrap",A3="wrapper",Ab="wrapTypes",H="borderBottomWidth",AB="borderLeftWidth",n="borderRightWidth",p="borderTopWidth",w="resize:mouseUp",h="resize:resize",x="resize:end",AJ="resize:start",AQ="t",A4="tr",AS="r",Au="br",Ad="b",Ax="bl",AW="l",A6="tl",AF=function(A){return(A instanceof Ae.Node);},A7=function(A){return m+A.toUpperCase();},A2=function(){return Array.prototype.slice.call(arguments).join(e);},AG=Ae.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),q=Ae.ClassNameManager.getClassName,S=q(AT),Av=q(AT,AR,U,Au),Aa=q(AT,D,Am,C),AL=q(AT,D,Am,Ac),At=q(Af),Ak=q(Af,m),AU=q(Af,m,d),J=q(Af,m,j),t=q(Af,m,j,"{handle}"),A8=q(Af,m,"{handle}"),G=q(Af,AV,z),i=q(Af,Aq),Ay=q(Af,A3),AZ=A2(S,Av),Ap=A2(S,Aa),Z=A2(S,AL),M=/^(t|b)$/i,AK=/^(tl|l|bl)$/i,AD=/^(tl|t|tr)$/i,u=/^(bl|br|l|r|tl|tr)$/i,Ag='<div class="'+A2(Ak,A8)+'">'+'<div class="'+A2(J,t)+'"></div>'+"</div>",AN='<div class="'+i+'"></div>',A9='<div class="'+Ay+'"></div>',f=[AQ,A4,AS,Au,Ad,Ax,AW,A6];var O=Ae.Component.create({NAME:Af,ATTRS:{activeHandle:{value:null,validator:A0},activeHandleEl:{value:null,validator:AF},autoHide:{value:false,validator:Aw},constrain:{setter:function(A){if(A&&(AF(A)||A0(A)||A.nodeType)){A=Ae.one(A);}return A;}},handles:{setter:function(L){var A=this;var B=[];if(F(L)){B=L;}else{if(A0(L)){if(L.toLowerCase()==k){B=f;}else{Ae.each(L.split(g),function(T,R){var BB=As(T);if(V(f,BB)>-1){B.push(BB);}});}}}return B;},value:k},minHeight:{value:15,validator:AC},minWidth:{value:15,validator:AC},maxHeight:{value:Infinity,validator:AC},maxWidth:{value:Infinity,validator:AC},node:{setter:Ae.one},preserveRatio:{value:false,validator:Aw},proxy:{value:false,validator:Aw},proxyEl:{setter:Ae.one,valueFn:function(){return Ae.Node.create(AN);}},resizing:{value:false,validator:Aw},tickX:{value:false},tickY:{value:false},wrap:{setter:function(R){var A=this;var L=A.get(c);var T=L.get(s);var B=A.get(Ab);if(B.test(T)){R=true;}return R;},value:false,validator:Aw},wrapTypes:{readOnly:true,value:/canvas|textarea|input|select|button|img/i},wrapper:{setter:function(){var A=this;var B=A.get(c);var L=B;if(A.get(Aj)){L=Ae.Node.create(A9);B.placeBefore(L);L.append(B);A._copyStyles(B,L);B.setStyles({position:A5,left:0,top:0});}return L;},value:null,writeOnce:true}},EXTENDS:Ae.Base,prototype:{CSS_INNER_HANDLE_MAP:{r:Z,l:Z,t:Ap,b:Ap,br:AZ},changeHeightHandles:false,changeLeftHandles:false,changeTopHandles:false,changeWidthHandles:false,constrainBorderInfo:null,info:null,originalInfo:null,initializer:function(){var A=this;A.info={};A.originalInfo={};A.constrainBorderInfo={bottom:0,left:0,right:0,top:0};A.get(c).addClass(At);A.renderer();},renderUI:function(){var A=this;A._renderHandles();A._renderProxy();},bindUI:function(){var A=this;A._createEvents();A._bindResize();A._bindDD();A._bindHandle();},syncUI:function(){var A=this;A._setHideHandlesUI(A.get(Ah));},destructor:function(){var A=this;var B=A.get(c);var L=A.get(A3);Ae.Event.purgeElement(L,true);A.eachHandle(function(T){var R=T.dd;if(R){R.destroy();}T.remove(true);});if(A.get(Aj)){B.setStyles({margin:L.getStyle(y),position:L.getStyle(Y)});L.placeBefore(B);L.remove(true);}B.removeClass(At);B.removeClass(G);},renderer:function(){this.renderUI();this.bindUI();this.syncUI();},_bindDD:function(){var A=this;A.on("drag:drag",A._handleResizeEvent);A.on("drag:dropmiss",A._handleMouseUpEvent);A.on("drag:end",A._handleResizeEndEvent);A.on("drag:start",A._handleResizeStartEvent);},_bindHandle:function(){var A=this;var B=A.get(A3);B.on("mouseenter",Ae.bind(A._onWrapperMouseEnter,A));B.on("mouseleave",Ae.bind(A._onWrapperMouseLeave,A));B.delegate("mouseenter",Ae.bind(A._onHandleMouseEnter,A),AX+Ak);B.delegate("mouseleave",Ae.bind(A._onHandleMouseLeave,A),AX+Ak);},_bindResize:function(){var A=this;A.after(h,A._afterResize);},_createEvents:function(){var A=this;var B=function(L,R){A.publish(L,{defaultFn:R,queuable:false,emitFacade:true,bubbles:true,prefix:Af});};B(AJ,this._defResizeStartFn);B(h,this._defResizeFn);B(x,this._defResizeEndFn);B(w,this._defMouseUpFn);},_renderHandles:function(){var A=this;var B=A.get(A3);A.eachHandle(function(L){B.append(L);});},_renderProxy:function(){var B=this;var A=B.get(l);B.get(A3).get(I).append(A.hide());},eachHandle:function(B){var A=this;Ae.each(A.get(z),function(T,L){var R=A.get(A7(T));B.apply(A,[R,T,L]);});},_buildHandle:function(L){var A=this;var B=Ae.Node.create(Ae.substitute(Ag,{handle:L}));B.one(AX+J).addClass(A.CSS_INNER_HANDLE_MAP[L]);A._setupHandleDD(L,B);return B;},_checkConstrain:function(B,BF,L){var BD=this;var A=BD.info;var BB=BD._getConstrainRegion();if(BB){var BC=A[B]+A[L];var R=BB[BF]-BD.constrainBorderInfo[BF];if(BC>=R){A[L]-=(BC-R);}var T=A[B];var BE=BB[B]+BD.constrainBorderInfo[B];if(T<=BE){A[B]+=(BE-T);A[L]-=(BE-T);}}},_checkHeight:function(){var B=this;var BB=B.info;var T=B.originalInfo;var L=B.get(a);var R=B.get(W);B._checkConstrain(P,An,v);var BC=(BB.offsetHeight>L);var A=(BB.offsetHeight<R);if(BC){BB.offsetHeight=L;if(B.changeTopHandles){BB.top=T.top+T.offsetHeight-L;}}if(A){BB.offsetHeight=R;if(B.changeTopHandles){BB.top=T.top+T.offsetHeight-R;}}},_checkRatio:function(){var BB=this;var B=BB.info;var R=BB.originalInfo;var BD=R.offsetWidth;var A=R.offsetHeight;
var T=R.top;var BE=R.left;var BC=function(){return(B.offsetWidth/BD);};var L=function(){return(B.offsetHeight/A);};if(BB.changeHeightHandles){B.offsetWidth=BD*L();BB._checkWidth();B.offsetHeight=A*BC();}else{if(BB.changeWidthHandles){B.offsetHeight=A*BC();BB._checkHeight();B.offsetWidth=BD*L();}}if(BB.changeTopHandles){B.top=T+(A-B.offsetHeight);}if(BB.changeLeftHandles){B.left=BE+(BD-B.offsetWidth);}},_checkRegion:function(){var A=this;var B=A._getConstrainRegion();return Ae.DOM.inRegion(null,B,true,A.info);},_checkWidth:function(){var A=this;var BC=A.info;var BB=A.originalInfo;var T=A.get(A1);var R=A.get(AE);A._checkConstrain(E,N,Az);var L=(BC.offsetWidth>T);var B=(BC.offsetWidth<R);if(L){BC.offsetWidth=T;if(A.changeLeftHandles){BC.left=BB.left+BB.offsetWidth-T;}}if(B){BC.offsetWidth=R;if(A.changeLeftHandles){BC.left=BB.left+BB.offsetWidth-R;}}},_copyStyles:function(T,BB){var B=this;var A=T.getStyle(Y).toLowerCase();if(A==A5){A=Q;}var R={position:A};var L={};Ae.each([P,N,An,E],function(BD){var BC=y+AG(BD);L[BC]=BB.getStyle(BC);R[BC]=T.getStyle(BC);});BB.setStyles(R);T.setStyles(L);T.setStyles({margin:0});BB.set(v,T.get(v));BB.set(Az,T.get(Az));},_extractHandleName:Ae.cached(function(L){var B=L.get(Ai);var A=B.match(new RegExp(q(Af,m,"(\\w{1,2})\\b")));return A?A[1]:null;}),_getConstrainRegion:function(){var A=this;var B=A.get(c);var R=A.get(o);var L=null;if(R){if(R==r){L=B.get(AH);}else{if(AF(R)){L=R.get(K);}else{L=R;}}}return L;},_getInfo:function(T,A){var BF=this,BB;var BD=A.dragEvent.target;if(A){BB=(BD.actXY.length?BD.actXY:BD.lastXY);}var BC=T.getXY();var R=BC[0];var L=BC[1];var B=T.get(v);var BE=T.get(Az);return{actXY:BB,bottom:(L+B),left:R,offsetHeight:B,offsetWidth:BE,right:(R+BE),top:L};},_recalculateXY:function(){var A=this;var L=A.info;var B=A.originalInfo;L.left=B.left+(L.left-B.left);L.top=B.top+(L.top-B.top);},_resize:function(){var A=this;var R=A.get(AA);var BB=A.info;var T=A.originalInfo;var L=BB.actXY[0]-T.actXY[0];var B=BB.actXY[1]-T.actXY[1];var BC={t:function(){BB.top=T.top+B;BB.offsetHeight=T.offsetHeight-B;},r:function(){BB.offsetWidth=T.offsetWidth+L;},l:function(){BB.left=T.left+L;BB.offsetWidth=T.offsetWidth-L;},b:function(){BB.offsetHeight=T.offsetHeight+B;},tr:function(){this.t();this.r();},br:function(){this.b();this.r();},tl:function(){this.t();this.l();},bl:function(){this.b();this.l();}};BC[R](L,B);},_setupHandleDD:function(R,L){var B=this;var A=new Ae.DD.Drag({bubbleTargets:B,clickPixelThresh:0,clickTimeThresh:0,data:{handle:R,node:L},node:L,useShim:true,move:false});A.plug(Ae.Plugin.DDConstrained,{stickX:(R==AS||R==AW),stickY:(R==AQ||R==Ad),tickX:B.get(Ar),tickY:B.get(Ao)});},_setOffset:function(L,B,A){L.set(Az,B);L.set(v,A);},_syncUI:function(){var A=this;var L=A.info;var R=A.get(A3);var B=A.get(c);A._setOffset(R,L.offsetWidth,L.offsetHeight);if(A.changeLeftHandles||A.changeTopHandles){R.setXY([L.left,L.top]);}if(!R.compareTo(B)){A._setOffset(B,L.offsetWidth,L.offsetHeight);}if(Ae.UA.webkit){B.setStyle(Af,AM);}},_syncProxyUI:function(){var B=this;var R=B.info;var L=B.get(AI);var A=B.get(l);var T=L.getStyle(Al);A.show().setStyle(Al,T);L.dd.set(AY,T);B._setOffset(A,R.offsetWidth,R.offsetHeight);A.setXY([R.left,R.top]);},_updateChangeHandleInfo:function(B){var A=this;A.changeHeightHandles=M.test(B);A.changeLeftHandles=AK.test(B);A.changeTopHandles=AD.test(B);A.changeWidthHandles=u.test(B);},_updateConstrainBorderInfo:function(){var B=this;var L=B.get(o);if(AF(L)){var A=function(R){return parseFloat(L.getStyle(R))||0;};B.constrainBorderInfo.bottom=A(H);B.constrainBorderInfo.left=A(AB);B.constrainBorderInfo.right=A(n);B.constrainBorderInfo.top=A(p);}},_updateInfo:function(B){var A=this;A.info=A._getInfo(A.get(A3),B);},_setActiveHandlesUI:function(L){var A=this;var B=A.get(AI);if(B){if(L){A.eachHandle(function(R){R.removeClass(AU);});B.addClass(AU);}else{B.removeClass(AU);}}},_setHideHandlesUI:function(B){var A=this;var L=A.get(A3);if(!A.get(b)){if(B){L.addClass(G);}else{L.removeClass(G);}}},_defMouseUpFn:function(B){var A=this;A.set(b,false);},_defResizeFn:function(L){var A=this;var B=A.info;A._updateInfo(L);A._resize();A._checkHeight();A._checkWidth();if(A.get(X)){A._checkRatio();}A._recalculateXY();if(A.get(o)&&!A._checkRegion()){A.info=B;}},_defResizeEndFn:function(L){var A=this;var B=L.dragEvent.target;B.actXY=[];if(A.get(Aq)){A._syncProxyUI();A.get(l).hide();}A._syncUI();A.set(AA,null);A.set(AI,null);A._setActiveHandlesUI(false);},_defResizeStartFn:function(B){var A=this;A.set(b,true);A.originalInfo=A._getInfo(A.get(A3),B);A._updateInfo(B);A._updateConstrainBorderInfo();},_afterResize:function(B){var A=this;if(A.get(Aq)){A._syncProxyUI();}else{A._syncUI();}},_handleMouseUpEvent:function(A){this.fire(w,{dragEvent:A,info:this.info});},_handleResizeEvent:function(A){this.fire(h,{dragEvent:A,info:this.info});},_handleResizeEndEvent:function(A){this.fire(x,{dragEvent:A,info:this.info});},_handleResizeStartEvent:function(A){this.fire(AJ,{dragEvent:A,info:this.info});},_onWrapperMouseEnter:function(B){var A=this;if(A.get(Ah)){A._setHideHandlesUI(false);}},_onWrapperMouseLeave:function(B){var A=this;if(A.get(Ah)){A._setHideHandlesUI(true);}},_onHandleMouseEnter:function(L){var A=this;var B=L.currentTarget;var R=A._extractHandleName(B);if(!A.get(b)){A.set(AA,R);A.set(AI,B);A._setActiveHandlesUI(true);A._updateChangeHandleInfo(R);}},_onHandleMouseLeave:function(B){var A=this;if(!A.get(b)){A._setActiveHandlesUI(false);}}}});Ae.each(f,function(B,A){O.ATTRS[A7(B)]={setter:function(){return this._buildHandle(B);},value:null,writeOnce:true};});Ae.Resize=O;},"1.0.1",{requires:["aui-base","dd-constrain","dd-drag","dd-drop","substitute"],skinnable:true});AUI.add("aui-portal-layout",function(X){var AP=X.Lang,w=AP.isBoolean,a=AP.isFunction,z=AP.isObject,P=AP.isString,J=AP.isValue,n=Math.ceil,H=X.DD.DDM,W="append",AM="circle",p="delegateConfig",o="down",g="drag",M="dragNode",N="dragNodes",c="dropContainer",V="dropNodes",AC="groups",s="icon",C="indicator",O="l",d="lazyStart",k="left",q="marginBottom",S="marginTop",AL="node",AA="offsetHeight",AB="offsetWidth",Y="placeholder",y="placeAfter",Q="placeBefore",AN="portal-layout",Z="prepend",AO="proxy",AE="proxyNode",I="r",m="region",AG="right",B=" ",r="target",AJ="triangle",e="up",T="placeholderAlign",t="quadrantEnter",U="quadrantExit",AI="quadrantOver",AK=0,x=0,b=0,G=0,f=function(A){return(A instanceof X.NodeList);},l=function(){return Array.prototype.slice.call(arguments).join(B);},D=function(A){return f(A)?A:X.all(A);},v=function(L,A){return parseInt(L.getStyle(A),10)||0;},K=X.ClassNameManager.getClassName,j=K(AN,g,C),i=K(AN,g,C,s),AD=K(AN,g,C,s,k),F=K(AN,g,C,s,AG),E=K(AN,g,r,C),AF=K(s),AQ=K(s,AM,AJ,O),AH=K(s,AM,AJ,I),h='<div class="'+j+'">'+'<div class="'+l(i,AD,AF,AH)+'"></div>'+'<div class="'+l(i,F,AF,AQ)+'"></div>'+"<div>";var u=X.Component.create({NAME:AN,ATTRS:{delegateConfig:{value:null,setter:function(R){var A=this;var L=X.merge({bubbleTargets:A,dragConfig:{},nodes:A.get(N),target:true},R);X.mix(L.dragConfig,{groups:A.get(AC),startCentered:true});return L;},validator:z},proxyNode:{setter:function(A){return P(A)?X.Node.create(A):A;}},dragNodes:{validator:P},dropContainer:{value:function(A){return A;},validator:a},dropNodes:{setter:D},groups:{value:[AN]},lazyStart:{value:false,validator:w},placeholder:{value:h,setter:function(L){var A=P(L)?X.Node.create(L):L;if(!A.inDoc()){X.getBody().prepend(A.hide());}AK=v(A,q);x=v(A,S);A.addClass(E);b=v(A,q);G=v(A,S);return A;}},proxy:{value:null,setter:function(R){var A=this;var L={moveOnEnd:false,positionProxy:false};if(A.get(AE)){L.borderStyle=null;}return X.merge(L,R||{});}}},EXTENDS:X.Base,prototype:{initializer:function(){var A=this;A.bindUI();},bindUI:function(){var A=this;A.publish(T,{defaultFn:A._defPlaceholderAlign,queuable:false,emitFacade:true,bubbles:true});A._bindDDEvents();A._bindDropZones();},addDropNode:function(R,L){var A=this;R=X.one(R);if(!H.getDrop(R)){A.addDropTarget(new X.DD.Drop(X.merge({bubbleTargets:A,node:R},L)));}},addDropTarget:function(L){var A=this;L.addToGroup(A.get(AC));},alignPlaceholder:function(R,L){var A=this;var AR=A.get(Y);if(!A.lazyEvents){AR.show();}A._syncPlaceholderSize();AR.setXY(A.getPlaceholderXY(R,L));},calculateDirections:function(R){var L=this;var AR=L.lastY;var AS=L.lastX;var A=R.lastXY[0];var AT=R.lastXY[1];if(A!=AS){L.XDirection=(A<AS)?k:AG;}if(AT!=AR){L.YDirection=(AT<AR)?e:o;}L.lastX=A;L.lastY=AT;},calculateQuadrant:function(AW,L){var AZ=this;var AT=1;var AY=L.get(AL).get(m);var AV=AW.mouseXY;var AS=AV[0];var AR=AV[1];var AX=AY.top;var R=AY.left;var A=AX+(AY.bottom-AX)/2;var AU=R+(AY.right-R)/2;if(AR<A){AT=(AS>AU)?1:2;}else{AT=(AS<AU)?3:4;}AZ.quadrant=AT;return AT;},getPlaceholderXY:function(AU,L){var AY=this;var AX=AY.get(Y);var AS=AK;var A=x;if(L){AS=b;A=G;}AX.toggleClass(E,L);var AR=n(AU.bottom);var R=n(AU.left);var AW=n(AU.top);var AV=R;var AT=(AY.quadrant<3)?(AW-(AX.get(AA)+AS)):(AR+A);return[AV,AT];},removeDropTarget:function(L){var A=this;L.removeFromGroup(A.get(AC));},_alignCondition:function(){var A=this;var AS=H.activeDrag;var R=A.activeDrop;if(AS&&R){var AR=AS.get(AL);var L=R.get(AL);return !AR.contains(L);}return true;},_bindDDEvents:function(){var A=this;var L=A.get(p);var R=A.get(AO);A.delegate=new X.DD.Delegate(L);A.delegate.dd.plug(X.Plugin.DDProxy,R);A.on("drag:end",X.bind(A._onDragEnd,A));A.on("drag:enter",X.bind(A._onDragEnter,A));A.on("drag:exit",X.bind(A._onDragExit,A));A.on("drag:over",X.bind(A._onDragOver,A));A.on("drag:start",X.bind(A._onDragStart,A));A.after("drag:start",X.bind(A._afterDragStart,A));A.on(t,A._syncPlaceholderUI);A.on(U,A._syncPlaceholderUI);},_bindDropZones:function(){var A=this;var L=A.get(V);if(L){L.each(function(AR,R){A.addDropNode(AR);});}},_defPlaceholderAlign:function(AS){var A=this;var R=A.activeDrop;var AT=A.get(Y);if(R&&AT){var AR=R.get("node");var L=!!AR.drop;A.lastAlignDrop=R;A.alignPlaceholder(R.get(AL).get(m),L);}},_evOutput:function(){var A=this;return{drag:H.activeDrag,drop:A.activeDrop,quadrant:A.quadrant,XDirection:A.XDirection,YDirection:A.YDirection};},_fireQuadrantEvents:function(){var A=this;var AR=A._evOutput();var R=A.lastQuadrant;var L=A.quadrant;if(L!=R){if(R){A.fire(U,X.merge({lastDrag:A.lastDrag,lastDrop:A.lastDrop,lastQuadrant:A.lastQuadrant,lastXDirection:A.lastXDirection,lastYDirection:A.lastYDirection},AR));}A.fire(t,AR);}A.fire(AI,AR);A.lastDrag=H.activeDrag;A.lastDrop=A.activeDrop;A.lastQuadrant=L;A.lastXDirection=A.XDirection;A.lastYDirection=A.YDirection;},_getAppendNode:function(){return H.activeDrag.get(AL);},_positionNode:function(AS){var A=this;var AR=A.lastAlignDrop||A.activeDrop;if(AR){var AU=A._getAppendNode();var L=AR.get(AL);var R=J(L.drop);var AT=(A.quadrant<3);if(A._alignCondition()){if(R){L[AT?Q:y](AU);}else{var AV=A.get(c).apply(A,[L]);AV[AT?Z:W](AU);}}}},_syncPlaceholderUI:function(L){var A=this;if(A._alignCondition()){A.fire(T,{drop:A.activeDrop,originalEvent:L});}},_syncPlaceholderSize:function(){var A=this;var L=A.activeDrop.get(AL);var R=A.get(Y);if(R){R.set(AB,L.get(AB));}},_syncProxyNodeUI:function(R){var A=this;var AR=H.activeDrag.get(M);var L=A.get(AE);if(L&&!L.compareTo(AR)){AR.append(L);A._syncProxyNodeSize();}},_syncProxyNodeSize:function(){var A=this;var R=H.activeDrag.get(AL);var L=A.get(AE);if(R&&L){L.set(AA,R.get(AA));L.set(AB,R.get(AB));}},_afterDragStart:function(L){var A=this;if(A.get(AO)){A._syncProxyNodeUI(L);}},_onDragEnd:function(R){var A=this;var AR=A.get(Y);var L=A.get(AE);if(!A.lazyEvents){A._positionNode(R);}if(L){L.remove();}if(AR){AR.hide();}A.lastQuadrant=null;A.lastXDirection=null;A.lastYDirection=null;},_onDragEnter:function(L){var A=this;A.activeDrop=H.activeDrop;if(A.lazyEvents&&A.lastActiveDrop){A.lazyEvents=false;
A._syncPlaceholderUI(L);}if(!A.lastActiveDrop){A.lastActiveDrop=H.activeDrop;}},_onDragExit:function(L){var A=this;A._syncPlaceholderUI(L);A.activeDrop=H.activeDrop;A.lastActiveDrop=H.activeDrop;},_onDragOver:function(R){var A=this;var L=R.drag;if(A.activeDrop==H.activeDrop){A.calculateDirections(L);A.calculateQuadrant(L,A.activeDrop);A._fireQuadrantEvents();}},_onDragStart:function(L){var A=this;if(A.get(d)){A.lazyEvents=true;}A.lastActiveDrop=null;A.activeDrop=H.activeDrop;}}});X.PortalLayout=u;},"1.0.1",{requires:["aui-base","dd-drag","dd-delegate","dd-drop","dd-proxy"],skinnable:true});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.2.0PR1
build: nightly
*/
YUI.add("dd-ddm-base",function(B){var A=function(){A.superclass.constructor.apply(this,arguments);};A.NAME="ddm";A.ATTRS={dragCursor:{value:"move"},clickPixelThresh:{value:3},clickTimeThresh:{value:1000},throttleTime:{value:-1},dragMode:{value:"point",setter:function(C){this._setDragMode(C);return C;}}};B.extend(A,B.Base,{_createPG:function(){},_active:null,_setDragMode:function(C){if(C===null){C=B.DD.DDM.get("dragMode");}switch(C){case 1:case"intersect":return 1;case 2:case"strict":return 2;case 0:case"point":return 0;}return 0;},CSS_PREFIX:B.ClassNameManager.getClassName("dd"),_activateTargets:function(){},_drags:[],activeDrag:false,_regDrag:function(C){if(this.getDrag(C.get("node"))){return false;}if(!this._active){this._setupListeners();}this._drags.push(C);return true;},_unregDrag:function(D){var C=[];B.each(this._drags,function(F,E){if(F!==D){C[C.length]=F;}});this._drags=C;},_setupListeners:function(){this._createPG();this._active=true;var C=B.one(B.config.doc);C.on("mousemove",B.throttle(B.bind(this._move,this),this.get("throttleTime")));C.on("mouseup",B.bind(this._end,this));},_start:function(){this.fire("ddm:start");this._startDrag();},_startDrag:function(){},_endDrag:function(){},_dropMove:function(){},_end:function(){if(this.activeDrag){this._endDrag();this.fire("ddm:end");this.activeDrag.end.call(this.activeDrag);this.activeDrag=null;}},stopDrag:function(){if(this.activeDrag){this._end();}return this;},_move:function(C){if(this.activeDrag){this.activeDrag._move.call(this.activeDrag,C);this._dropMove();}},cssSizestoObject:function(D){var C=D.split(" ");switch(C.length){case 1:C[1]=C[2]=C[3]=C[0];break;case 2:C[2]=C[0];C[3]=C[1];break;case 3:C[3]=C[1];break;}return{top:parseInt(C[0],10),right:parseInt(C[1],10),bottom:parseInt(C[2],10),left:parseInt(C[3],10)};},getDrag:function(D){var C=false,E=B.one(D);if(E instanceof B.Node){B.each(this._drags,function(G,F){if(E.compareTo(G.get("node"))){C=G;}});}return C;},swapPosition:function(D,C){D=B.DD.DDM.getNode(D);C=B.DD.DDM.getNode(C);var F=D.getXY(),E=C.getXY();D.setXY(E);C.setXY(F);return D;},getNode:function(C){if(C&&C.get){if(B.Widget&&(C instanceof B.Widget)){C=C.get("boundingBox");}else{C=C.get("node");}}else{C=B.one(C);}return C;},swapNode:function(E,C){E=B.DD.DDM.getNode(E);C=B.DD.DDM.getNode(C);var F=C.get("parentNode"),D=C.get("nextSibling");if(D==E){F.insertBefore(E,C);}else{if(C==E.get("nextSibling")){F.insertBefore(C,E);}else{E.get("parentNode").replaceChild(C,E);F.insertBefore(E,D);}}return E;}});B.namespace("DD");B.DD.DDM=new A();},"3.2.0PR1",{requires:["node","base","yui-throttle","classnamemanager"],skinnable:false});YUI.add("dd-ddm",function(A){A.mix(A.DD.DDM,{_pg:null,_debugShim:false,_activateTargets:function(){},_deactivateTargets:function(){},_startDrag:function(){if(this.activeDrag&&this.activeDrag.get("useShim")){this._pg_activate();this._activateTargets();}},_endDrag:function(){this._pg_deactivate();this._deactivateTargets();},_pg_deactivate:function(){this._pg.setStyle("display","none");},_pg_activate:function(){var B=this.activeDrag.get("activeHandle"),C="auto";if(B){C=B.getStyle("cursor");}if(C=="auto"){C=this.get("dragCursor");}this._pg_size();this._pg.setStyles({top:0,left:0,display:"block",opacity:((this._debugShim)?".5":"0"),cursor:C});},_pg_size:function(){if(this.activeDrag){var B=A.one("body"),D=B.get("docHeight"),C=B.get("docWidth");this._pg.setStyles({height:D+"px",width:C+"px"});}},_createPG:function(){var D=A.Node.create("<div></div>"),B=A.one("body"),C;D.setStyles({top:"0",left:"0",position:"absolute",zIndex:"9999",overflow:"hidden",backgroundColor:"red",display:"none",height:"5px",width:"5px"});D.set("id",A.stamp(D));D.addClass(A.DD.DDM.CSS_PREFIX+"-shim");B.prepend(D);this._pg=D;this._pg.on("mousemove",A.throttle(A.bind(this._move,this),this.get("throttleTime")));this._pg.on("mouseup",A.bind(this._end,this));C=A.one("win");A.on("window:resize",A.bind(this._pg_size,this));C.on("scroll",A.bind(this._pg_size,this));}},true);},"3.2.0PR1",{requires:["dd-ddm-base","event-resize"],skinnable:false});YUI.add("dd-ddm-drop",function(A){A.mix(A.DD.DDM,{_noShim:false,_activeShims:[],_hasActiveShim:function(){if(this._noShim){return true;}return this._activeShims.length;},_addActiveShim:function(B){this._activeShims[this._activeShims.length]=B;},_removeActiveShim:function(C){var B=[];A.each(this._activeShims,function(E,D){if(E._yuid!==C._yuid){B[B.length]=E;}});this._activeShims=B;},syncActiveShims:function(B){A.later(0,this,function(C){var D=((C)?this.targets:this._lookup());A.each(D,function(F,E){F.sizeShim.call(F);},this);},B);},mode:0,POINT:0,INTERSECT:1,STRICT:2,useHash:true,activeDrop:null,validDrops:[],otherDrops:{},targets:[],_addValid:function(B){this.validDrops[this.validDrops.length]=B;return this;},_removeValid:function(B){var C=[];A.each(this.validDrops,function(E,D){if(E!==B){C[C.length]=E;}});this.validDrops=C;return this;},isOverTarget:function(C){if(this.activeDrag&&C){var G=this.activeDrag.mouseXY,F,B=this.activeDrag.get("dragMode"),E,D=C.shim;if(G&&this.activeDrag){E=this.activeDrag.region;if(B==this.STRICT){return this.activeDrag.get("dragNode").inRegion(C.region,true,E);}else{if(C&&C.shim){if((B==this.INTERSECT)&&this._noShim){F=((E)?E:this.activeDrag.get("node"));return C.get("node").intersect(F).inRegion;}else{if(this._noShim){D=C.get("node");}return D.intersect({top:G[1],bottom:G[1],left:G[0],right:G[0]},C.region).inRegion;}}else{return false;}}}else{return false;}}else{return false;}},clearCache:function(){this.validDrops=[];this.otherDrops={};this._activeShims=[];},_activateTargets:function(){this._noShim=true;this.clearCache();A.each(this.targets,function(C,B){C._activateShim([]);if(C.get("noShim")==true){this._noShim=false;}},this);this._handleTargetOver();},getBestMatch:function(F,D){var C=null,E=0,B;A.each(F,function(I,H){var G=this.activeDrag.get("dragNode").intersect(I.get("node"));I.region.area=G.area;if(G.inRegion){if(G.area>E){E=G.area;C=I;}}},this);if(D){B=[];A.each(F,function(H,G){if(H!==C){B[B.length]=H;
}},this);return[C,B];}else{return C;}},_deactivateTargets:function(){var B=[],C,E=this.activeDrag,D=this.activeDrop;if(E&&D&&this.otherDrops[D]){if(!E.get("dragMode")){B=this.otherDrops;delete B[D];}else{C=this.getBestMatch(this.otherDrops,true);D=C[0];B=C[1];}E.get("node").removeClass(this.CSS_PREFIX+"-drag-over");if(D){D.fire("drop:hit",{drag:E,drop:D,others:B});E.fire("drag:drophit",{drag:E,drop:D,others:B});}}else{if(E&&E.get("dragging")){E.get("node").removeClass(this.CSS_PREFIX+"-drag-over");E.fire("drag:dropmiss",{pageX:E.lastXY[0],pageY:E.lastXY[1]});}else{}}this.activeDrop=null;A.each(this.targets,function(G,F){G._deactivateShim([]);},this);},_dropMove:function(){if(this._hasActiveShim()){this._handleTargetOver();}else{A.each(this.otherDrops,function(C,B){C._handleOut.apply(C,[]);});}},_lookup:function(){if(!this.useHash||this._noShim){return this.validDrops;}var B=[];A.each(this.validDrops,function(D,C){if(D.shim&&D.shim.inViewportRegion(false,D.region)){B[B.length]=D;}});return B;},_handleTargetOver:function(){var B=this._lookup();A.each(B,function(D,C){D._handleTargetOver.call(D);},this);},_regTarget:function(B){this.targets[this.targets.length]=B;},_unregTarget:function(C){var B=[],D;A.each(this.targets,function(F,E){if(F!=C){B[B.length]=F;}},this);this.targets=B;D=[];A.each(this.validDrops,function(F,E){if(F!==C){D[D.length]=F;}});this.validDrops=D;},getDrop:function(C){var B=false,D=A.one(C);if(D instanceof A.Node){A.each(this.targets,function(F,E){if(D.compareTo(F.get("node"))){B=F;}});}return B;}},true);},"3.2.0PR1",{requires:["dd-ddm"],skinnable:false});YUI.add("dd-drag",function(D){var E=D.DD.DDM,R="node",G="dragging",M="dragNode",C="offsetHeight",K="offsetWidth",H="drag:mouseDown",B="drag:afterMouseDown",F="drag:removeHandle",L="drag:addHandle",P="drag:removeInvalid",Q="drag:addInvalid",J="drag:start",I="drag:end",N="drag:drag",O="drag:align",A=function(T){this._lazyAddAttrs=false;A.superclass.constructor.apply(this,arguments);var S=E._regDrag(this);if(!S){D.error("Failed to register node, already in use: "+T.node);}};A.NAME="drag";A.START_EVENT="mousedown";A.ATTRS={node:{setter:function(S){var T=D.one(S);if(!T){D.error("DD.Drag: Invalid Node Given: "+S);}else{T=T.item(0);}return T;}},dragNode:{setter:function(S){var T=D.one(S);if(!T){D.error("DD.Drag: Invalid dragNode Given: "+S);}return T;}},offsetNode:{value:true},startCentered:{value:false},clickPixelThresh:{value:E.get("clickPixelThresh")},clickTimeThresh:{value:E.get("clickTimeThresh")},lock:{value:false,setter:function(S){if(S){this.get(R).addClass(E.CSS_PREFIX+"-locked");}else{this.get(R).removeClass(E.CSS_PREFIX+"-locked");}return S;}},data:{value:false},move:{value:true},useShim:{value:true},activeHandle:{value:false},primaryButtonOnly:{value:true},dragging:{value:false},parent:{value:false},target:{value:false,setter:function(S){this._handleTarget(S);return S;}},dragMode:{value:null,setter:function(S){return E._setDragMode(S);}},groups:{value:["default"],getter:function(){if(!this._groups){this._groups={};}var S=[];D.each(this._groups,function(U,T){S[S.length]=T;});return S;},setter:function(S){this._groups={};D.each(S,function(U,T){this._groups[U]=true;},this);return S;}},handles:{value:null,setter:function(S){if(S){this._handles={};D.each(S,function(U,T){var V=U;if(U instanceof D.Node||U instanceof D.NodeList){V=U._yuid;}this._handles[V]=U;},this);}else{this._handles=null;}return S;}},bubbles:{setter:function(S){this.addTarget(S);return S;}},haltDown:{value:true}};D.extend(A,D.Base,{_bubbleTargets:D.DD.DDM,addToGroup:function(S){this._groups[S]=true;E._activateTargets();return this;},removeFromGroup:function(S){delete this._groups[S];E._activateTargets();return this;},target:null,_handleTarget:function(S){if(D.DD.Drop){if(S===false){if(this.target){E._unregTarget(this.target);this.target=null;}return false;}else{if(!D.Lang.isObject(S)){S={};}S.bubbleTargets=("bubbleTargets" in S)?S.bubbleTargets:D.Object.values(this._yuievt.targets);S.node=this.get(R);S.groups=S.groups||this.get("groups");this.target=new D.DD.Drop(S);}}else{return false;}},_groups:null,_createEvents:function(){this.publish(H,{defaultFn:this._defMouseDownFn,queuable:false,emitFacade:true,bubbles:true,prefix:"drag"});this.publish(O,{defaultFn:this._defAlignFn,queuable:false,emitFacade:true,bubbles:true,prefix:"drag"});this.publish(N,{defaultFn:this._defDragFn,queuable:false,emitFacade:true,bubbles:true,prefix:"drag"});this.publish(I,{preventedFn:this._prevEndFn,queuable:false,emitFacade:true,bubbles:true,prefix:"drag"});var S=[B,F,L,P,Q,J,"drag:drophit","drag:dropmiss","drag:over","drag:enter","drag:exit"];D.each(S,function(U,T){this.publish(U,{type:U,emitFacade:true,bubbles:true,preventable:false,queuable:false,prefix:"drag"});},this);},_ev_md:null,_startTime:null,_endTime:null,_handles:null,_invalids:null,_invalidsDefault:{"textarea":true,"input":true,"a":true,"button":true,"select":true},_dragThreshMet:null,_fromTimeout:null,_clickTimeout:null,deltaXY:null,startXY:null,nodeXY:null,lastXY:null,actXY:null,realXY:null,mouseXY:null,region:null,_handleMouseUp:function(S){this._fixIEMouseUp();if(E.activeDrag){E._end();}},_fixDragStart:function(S){S.preventDefault();},_ieSelectFix:function(){return false;},_ieSelectBack:null,_fixIEMouseDown:function(){if(D.UA.ie){this._ieSelectBack=D.config.doc.body.onselectstart;D.config.doc.body.onselectstart=this._ieSelectFix;}},_fixIEMouseUp:function(){if(D.UA.ie){D.config.doc.body.onselectstart=this._ieSelectBack;}},_handleMouseDownEvent:function(S){this.fire(H,{ev:S});},_defMouseDownFn:function(T){var S=T.ev;this._dragThreshMet=false;this._ev_md=S;if(this.get("primaryButtonOnly")&&S.button>1){return false;}if(this.validClick(S)){this._fixIEMouseDown();if(this.get("haltDown")){S.halt();}else{S.preventDefault();}this._setStartPosition([S.pageX,S.pageY]);E.activeDrag=this;this._clickTimeout=D.later(this.get("clickTimeThresh"),this,this._timeoutCheck);}this.fire(B,{ev:S});},validClick:function(W){var V=false,Z=false,S=W.target,U=null,T=null,X=null,Y=false;
if(this._handles){D.each(this._handles,function(a,b){if(a instanceof D.Node||a instanceof D.NodeList){if(!V){X=a;if(X instanceof D.Node){X=new D.NodeList(a._node);}X.each(function(c){if(c.contains(S)){V=true;}});}}else{if(D.Lang.isString(b)){if(S.test(b+", "+b+" *")&&!U){U=b;V=true;}}}});}else{Z=this.get(R);if(Z.contains(S)||Z.compareTo(S)){V=true;}}if(V){if(this._invalids){D.each(this._invalids,function(a,b){if(D.Lang.isString(b)){if(S.test(b+", "+b+" *")){V=false;}}});}}if(V){if(U){T=W.currentTarget.all(U);Y=false;T.each(function(b,a){if((b.contains(S)||b.compareTo(S))&&!Y){Y=true;this.set("activeHandle",b);}},this);}else{this.set("activeHandle",this.get(R));}}return V;},_setStartPosition:function(S){this.startXY=S;this.nodeXY=this.lastXY=this.realXY=this.get(R).getXY();if(this.get("offsetNode")){this.deltaXY=[(this.startXY[0]-this.nodeXY[0]),(this.startXY[1]-this.nodeXY[1])];}else{this.deltaXY=[0,0];}},_timeoutCheck:function(){if(!this.get("lock")&&!this._dragThreshMet&&this._ev_md){this._fromTimeout=this._dragThreshMet=true;this.start();this._alignNode([this._ev_md.pageX,this._ev_md.pageY],true);}},removeHandle:function(T){var S=T;if(T instanceof D.Node||T instanceof D.NodeList){S=T._yuid;}if(this._handles[S]){delete this._handles[S];this.fire(F,{handle:T});}return this;},addHandle:function(T){if(!this._handles){this._handles={};}var S=T;if(T instanceof D.Node||T instanceof D.NodeList){S=T._yuid;}this._handles[S]=T;this.fire(L,{handle:T});return this;},removeInvalid:function(S){if(this._invalids[S]){this._invalids[S]=null;delete this._invalids[S];this.fire(P,{handle:S});}return this;},addInvalid:function(S){if(D.Lang.isString(S)){this._invalids[S]=true;this.fire(Q,{handle:S});}return this;},initializer:function(S){this.get(R).dd=this;if(!this.get(R).get("id")){var T=D.stamp(this.get(R));this.get(R).set("id",T);}this.actXY=[];this._invalids=D.clone(this._invalidsDefault,true);this._createEvents();if(!this.get(M)){this.set(M,this.get(R));}this.on("initializedChange",D.bind(this._prep,this));this.set("groups",this.get("groups"));},_prep:function(){this._dragThreshMet=false;var S=this.get(R);S.addClass(E.CSS_PREFIX+"-draggable");S.addClass(E.CSS_PREFIX+"-draggable");S.on(A.START_EVENT,D.bind(this._handleMouseDownEvent,this));S.on("mouseup",D.bind(this._handleMouseUp,this));S.on("dragstart",D.bind(this._fixDragStart,this));},_unprep:function(){var S=this.get(R);S.removeClass(E.CSS_PREFIX+"-draggable");S.detachAll();},start:function(){if(!this.get("lock")&&!this.get(G)){var T=this.get(R),S,U,V;this._startTime=(new Date()).getTime();E._start();T.addClass(E.CSS_PREFIX+"-dragging");this.fire(J,{pageX:this.nodeXY[0],pageY:this.nodeXY[1],startTime:this._startTime});T=this.get(M);V=this.nodeXY;S=T.get(K);U=T.get(C);if(this.get("startCentered")){this._setStartPosition([V[0]+(S/2),V[1]+(U/2)]);}this.region={"0":V[0],"1":V[1],area:0,top:V[1],right:V[0]+S,bottom:V[1]+U,left:V[0]};this.set(G,true);}return this;},end:function(){this._endTime=(new Date()).getTime();if(this._clickTimeout){this._clickTimeout.cancel();}this._dragThreshMet=this._fromTimeout=false;this._ev_md=null;if(!this.get("lock")&&this.get(G)){this.fire(I,{pageX:this.lastXY[0],pageY:this.lastXY[1],startTime:this._startTime,endTime:this._endTime});}this.get(R).removeClass(E.CSS_PREFIX+"-dragging");this.set(G,false);this.deltaXY=[0,0];return this;},_prevEndFn:function(S){this.get(M).setXY(this.nodeXY);},_align:function(S){this.fire(O,{pageX:S[0],pageY:S[1]});},_defAlignFn:function(S){this.actXY=[S.pageX-this.deltaXY[0],S.pageY-this.deltaXY[1]];},_alignNode:function(S){this._align(S);this._moveNode();},_moveNode:function(S){var T=[],U=[],W=this.nodeXY,V=this.actXY;T[0]=(V[0]-this.lastXY[0]);T[1]=(V[1]-this.lastXY[1]);U[0]=(V[0]-this.nodeXY[0]);U[1]=(V[1]-this.nodeXY[1]);this.region={"0":V[0],"1":V[1],area:0,top:V[1],right:V[0]+this.get(M).get(K),bottom:V[1]+this.get(M).get(C),left:V[0]};this.fire(N,{pageX:V[0],pageY:V[1],scroll:S,info:{start:W,xy:V,delta:T,offset:U}});this.lastXY=V;},_defDragFn:function(S){if(this.get("move")){if(S.scroll){S.scroll.node.set("scrollTop",S.scroll.top);S.scroll.node.set("scrollLeft",S.scroll.left);}this.get(M).setXY([S.pageX,S.pageY]);this.realXY=[S.pageX,S.pageY];}},_move:function(U){if(this.get("lock")){return false;}else{this.mouseXY=[U.pageX,U.pageY];if(!this._dragThreshMet){var T=Math.abs(this.startXY[0]-U.pageX),S=Math.abs(this.startXY[1]-U.pageY);if(T>this.get("clickPixelThresh")||S>this.get("clickPixelThresh")){this._dragThreshMet=true;this.start();this._alignNode([U.pageX,U.pageY]);}}else{if(this._clickTimeout){this._clickTimeout.cancel();}this._alignNode([U.pageX,U.pageY]);}}},stopDrag:function(){if(this.get(G)){E._end();}return this;},destructor:function(){this._unprep();this.detachAll();if(this.target){this.target.destroy();}E._unregDrag(this);}});D.namespace("DD");D.DD.Drag=A;},"3.2.0PR1",{requires:["dd-ddm-base"],skinnable:false});YUI.add("dd-proxy",function(H){var F=H.DD.DDM,B="node",C="dragNode",A="host",D=true,E,G=function(I){G.superclass.constructor.apply(this,arguments);};G.NAME="DDProxy";G.NS="proxy";G.ATTRS={host:{},moveOnEnd:{value:D},hideOnEnd:{value:D},resizeFrame:{value:D},positionProxy:{value:D},borderStyle:{value:"1px solid #808080"},cloneNode:{value:false}};E={_hands:null,_init:function(){if(!F._proxy){F._createFrame();H.on("domready",H.bind(this._init,this));return;}if(!this._hands){this._hands=[];}var K,J,L=this.get(A),I=L.get(C);if(I.compareTo(L.get(B))){if(F._proxy){L.set(C,F._proxy);}}H.each(this._hands,function(M){M.detach();});K=F.on("ddm:start",H.bind(function(){if(F.activeDrag===L){F._setFrame(L);}},this));J=F.on("ddm:end",H.bind(function(){if(L.get("dragging")){if(this.get("moveOnEnd")){L.get(B).setXY(L.lastXY);}if(this.get("hideOnEnd")){L.get(C).setStyle("display","none");}if(this.get("cloneNode")){L.get(C).remove();L.set(C,F._proxy);}}},this));this._hands=[K,J];},initializer:function(){this._init();},destructor:function(){var I=this.get(A);H.each(this._hands,function(J){J.detach();
});I.set(C,I.get(B));},clone:function(){var I=this.get(A),K=I.get(B),J=K.cloneNode(true);J.set("id","");J.setStyle("position","absolute");delete J._yuid;H.stamp(J);K.get("parentNode").appendChild(J);I.set(C,J);return J;}};H.namespace("Plugin");H.extend(G,H.Base,E);H.Plugin.DDProxy=G;H.mix(F,{_createFrame:function(){if(!F._proxy){F._proxy=D;var J=H.Node.create("<div></div>"),I=H.one("body");J.setStyles({position:"absolute",display:"none",zIndex:"999",top:"-999px",left:"-999px"});I.prepend(J);J.set("id",H.guid());J.addClass(F.CSS_PREFIX+"-proxy");F._proxy=J;}},_setFrame:function(J){var M=J.get(B),L=J.get(C),I,K="auto";if(J.proxy.get("resizeFrame")){F._proxy.setStyles({height:M.get("offsetHeight")+"px",width:M.get("offsetWidth")+"px"});}I=F.activeDrag.get("activeHandle");if(I){K=I.getStyle("cursor");}if(K=="auto"){K=F.get("dragCursor");}L.setStyles({visibility:"hidden",display:"block",cursor:K,border:J.proxy.get("borderStyle")});if(J.proxy.get("cloneNode")){L=J.proxy.clone();}if(J.proxy.get("positionProxy")){L.setXY(J.nodeXY);}L.setStyle("visibility","visible");}});},"3.2.0PR1",{requires:["dd-ddm","dd-drag"],skinnable:false});YUI.add("dd-constrain",function(B){var K="dragNode",M="offsetHeight",F="offsetWidth",P="host",G="tickXArray",N="tickYArray",O=B.DD.DDM,E="top",I="right",L="bottom",D="left",J="view",H=null,A=function(C){this._lazyAddAttrs=false;A.superclass.constructor.apply(this,arguments);};A.NAME="ddConstrained";A.NS="con";A.ATTRS={host:{},stickX:{value:false},stickY:{value:false},tickX:{value:false},tickY:{value:false},tickXArray:{value:false},tickYArray:{value:false},gutter:{value:"0",setter:function(C){return B.DD.DDM.cssSizestoObject(C);}},constrain:{value:J,setter:function(C){var Q=B.one(C);if(Q){C=Q;}return C;}},constrain2region:{setter:function(C){return this.set("constrain",C);}},constrain2node:{setter:function(C){return this.set("constrain",B.one(C));}},constrain2view:{setter:function(C){return this.set("constrain",J);}},cacheRegion:{value:true}};H={initializer:function(){this.get(P).on("drag:start",B.bind(this._handleStart,this));this.get(P).after("drag:align",B.bind(this.align,this));},_handleStart:function(){this.resetCache();},_regionCache:null,_cacheRegion:function(){this._regionCache=this.get("constrain").get("region");},resetCache:function(){this._regionCache=null;},_getConstraint:function(){var C=this.get("constrain"),Q=this.get("gutter"),R;if(C){if(C instanceof B.Node){if(!this._regionCache){B.on("resize",B.bind(this._cacheRegion,this),B.config.win);this._cacheRegion();}R=B.clone(this._regionCache);if(!this.get("cacheRegion")){this.resetCache();}}else{if(B.Lang.isObject(C)){R=C;}}}if(!C||!R){C=J;}if(C===J){R=this.get(P).get(K).get("viewportRegion");}B.each(Q,function(S,T){if((T==I)||(T==L)){R[T]-=S;}else{R[T]+=S;}});return R;},getRegion:function(T){var R={},S=null,C=null,Q=this.get(P);R=this._getConstraint();if(T){S=Q.get(K).get(M);C=Q.get(K).get(F);R[I]=R[I]-C;R[L]=R[L]-S;}return R;},_checkRegion:function(C){var R=C,T=this.getRegion(),S=this.get(P),U=S.get(K).get(M),Q=S.get(K).get(F);if(R[1]>(T[L]-U)){C[1]=(T[L]-U);}if(T[E]>R[1]){C[1]=T[E];}if(R[0]>(T[I]-Q)){C[0]=(T[I]-Q);}if(T[D]>R[0]){C[0]=T[D];}return C;},inRegion:function(R){R=R||this.get(P).get(K).getXY();var Q=this._checkRegion([R[0],R[1]]),C=false;if((R[0]===Q[0])&&(R[1]===Q[1])){C=true;}return C;},align:function(){var R=this.get(P),C=R.actXY,Q=this.getRegion(true);if(this.get("stickX")){C[1]=(R.startXY[1]-R.deltaXY[1]);}if(this.get("stickY")){C[0]=(R.startXY[0]-R.deltaXY[0]);}if(Q){C=this._checkRegion(C);}C=this._checkTicks(C,Q);R.actXY=C;},_checkTicks:function(V,T){var S=this.get(P),U=(S.startXY[0]-S.deltaXY[0]),R=(S.startXY[1]-S.deltaXY[1]),C=this.get("tickX"),Q=this.get("tickY");if(C&&!this.get(G)){V[0]=O._calcTicks(V[0],U,C,T[D],T[I]);}if(Q&&!this.get(N)){V[1]=O._calcTicks(V[1],R,Q,T[E],T[L]);}if(this.get(G)){V[0]=O._calcTickArray(V[0],this.get(G),T[D],T[I]);}if(this.get(N)){V[1]=O._calcTickArray(V[1],this.get(N),T[E],T[L]);}return V;}};B.namespace("Plugin");B.extend(A,B.Base,H);B.Plugin.DDConstrained=A;B.mix(O,{_calcTicks:function(W,V,S,U,T){var Q=((W-V)/S),R=Math.floor(Q),C=Math.ceil(Q);if((R!==0)||(C!==0)){if((Q>=R)&&(Q<=C)){W=(V+(S*R));if(U&&T){if(W<U){W=(V+(S*(R+1)));}if(W>T){W=(V+(S*(R-1)));}}}}return W;},_calcTickArray:function(X,Y,W,T){var Q=0,U=Y.length,S=0,R,C,V;if(!Y||(Y.length===0)){return X;}else{if(Y[0]>=X){return Y[0];}else{for(Q=0;Q<U;Q++){S=(Q+1);if(Y[S]&&Y[S]>=X){R=X-Y[Q];C=Y[S]-X;V=(C>R)?Y[Q]:Y[S];if(W&&T){if(V>T){if(Y[Q]){V=Y[Q];}else{V=Y[U-1];}}}return V;}}return Y[Y.length-1];}}}});},"3.2.0PR1",{requires:["dd-drag"],skinnable:false});YUI.add("dd-scroll",function(B){var H=function(){H.superclass.constructor.apply(this,arguments);},C,D,L="host",A="buffer",J="parentScroll",G="windowScroll",I="scrollTop",F="scrollLeft",E="offsetWidth",K="offsetHeight";H.ATTRS={parentScroll:{value:false,setter:function(M){if(M){return M;}return false;}},buffer:{value:30,validator:B.Lang.isNumber},scrollDelay:{value:235,validator:B.Lang.isNumber},host:{value:null},windowScroll:{value:false,validator:B.Lang.isBoolean},vertical:{value:true,validator:B.Lang.isBoolean},horizontal:{value:true,validator:B.Lang.isBoolean}};B.extend(H,B.Base,{_scrolling:null,_vpRegionCache:null,_dimCache:null,_scrollTimer:null,_getVPRegion:function(){var M={},N=this.get(J),R=this.get(A),Q=this.get(G),U=((Q)?[]:N.getXY()),S=((Q)?"winWidth":E),P=((Q)?"winHeight":K),T=((Q)?N.get(I):U[1]),O=((Q)?N.get(F):U[0]);M={top:T+R,right:(N.get(S)+O)-R,bottom:(N.get(P)+T)-R,left:O+R};this._vpRegionCache=M;return M;},initializer:function(){var M=this.get(L);M.after("drag:start",B.bind(this.start,this));M.after("drag:end",B.bind(this.end,this));M.on("drag:align",B.bind(this.align,this));B.one("win").on("scroll",B.bind(function(){this._vpRegionCache=null;},this));},_checkWinScroll:function(Y){var X=this._getVPRegion(),M=this.get(L),O=this.get(G),S=M.lastXY,N=false,e=this.get(A),R=this.get(J),g=R.get(I),U=R.get(F),V=this._dimCache.w,a=this._dimCache.h,T=S[1]+a,W=S[1],d=S[0]+V,Q=S[0],f=W,P=Q,Z=g,c=U;
if(this.get("horizontal")){if(Q<=X.left){N=true;P=S[0]-((O)?e:0);c=U-e;}if(d>=X.right){N=true;P=S[0]+((O)?e:0);c=U+e;}}if(this.get("vertical")){if(T>=X.bottom){N=true;f=S[1]+((O)?e:0);Z=g+e;}if(W<=X.top){N=true;f=S[1]-((O)?e:0);Z=g-e;}}if(Z<0){Z=0;f=S[1];}if(c<0){c=0;P=S[0];}if(f<0){f=S[1];}if(P<0){P=S[0];}if(Y){M.actXY=[P,f];M._moveNode({node:R,top:Z,left:c});if(!Z&&!c){this._cancelScroll();}}else{if(N){this._initScroll();}else{this._cancelScroll();}}},_initScroll:function(){this._cancelScroll();this._scrollTimer=B.Lang.later(this.get("scrollDelay"),this,this._checkWinScroll,[true],true);},_cancelScroll:function(){this._scrolling=false;if(this._scrollTimer){this._scrollTimer.cancel();delete this._scrollTimer;}},align:function(M){if(this._scrolling){this._cancelScroll();M.preventDefault();}if(!this._scrolling){this._checkWinScroll();}},_setDimCache:function(){var M=this.get(L).get("dragNode");this._dimCache={h:M.get(K),w:M.get(E)};},start:function(){this._setDimCache();},end:function(M){this._dimCache=null;this._cancelScroll();},toString:function(){return H.NAME+" #"+this.get("node").get("id");}});B.namespace("Plugin");C=function(){C.superclass.constructor.apply(this,arguments);};C.ATTRS=B.merge(H.ATTRS,{windowScroll:{value:true,setter:function(M){if(M){this.set(J,B.one("win"));}return M;}}});B.extend(C,H,{initializer:function(){this.set("windowScroll",this.get("windowScroll"));}});C.NAME=C.NS="winscroll";B.Plugin.DDWinScroll=C;D=function(){D.superclass.constructor.apply(this,arguments);};D.ATTRS=B.merge(H.ATTRS,{node:{value:false,setter:function(M){var N=B.one(M);if(!N){if(M!==false){B.error("DDNodeScroll: Invalid Node Given: "+M);}}else{N=N.item(0);this.set(J,N);}return N;}}});B.extend(D,H,{initializer:function(){this.set("node",this.get("node"));}});D.NAME=D.NS="nodescroll";B.Plugin.DDNodeScroll=D;B.DD.Scroll=H;},"3.2.0PR1",{optional:["dd-proxy"],requires:["dd-drag"],skinnable:false});YUI.add("dd-drop",function(A){var B="node",G=A.DD.DDM,F="offsetHeight",C="offsetWidth",I="drop:over",H="drop:enter",D="drop:exit",E=function(){this._lazyAddAttrs=false;E.superclass.constructor.apply(this,arguments);A.on("domready",A.bind(function(){A.later(100,this,this._createShim);},this));G._regTarget(this);};E.NAME="drop";E.ATTRS={node:{setter:function(J){var K=A.one(J);if(!K){A.error("DD.Drop: Invalid Node Given: "+J);}return K;}},groups:{value:["default"],setter:function(J){this._groups={};A.each(J,function(L,K){this._groups[L]=true;},this);return J;}},padding:{value:"0",setter:function(J){return G.cssSizestoObject(J);}},lock:{value:false,setter:function(J){if(J){this.get(B).addClass(G.CSS_PREFIX+"-drop-locked");}else{this.get(B).removeClass(G.CSS_PREFIX+"-drop-locked");}return J;}},bubbles:{setter:function(J){this.addTarget(J);return J;}},useShim:{value:true,setter:function(J){A.DD.DDM._noShim=!J;return J;}}};A.extend(E,A.Base,{_bubbleTargets:A.DD.DDM,addToGroup:function(J){this._groups[J]=true;return this;},removeFromGroup:function(J){delete this._groups[J];return this;},_createEvents:function(){var J=[I,H,D,"drop:hit"];A.each(J,function(L,K){this.publish(L,{type:L,emitFacade:true,preventable:false,bubbles:true,queuable:false,prefix:"drop"});},this);},_valid:null,_groups:null,shim:null,region:null,overTarget:null,inGroup:function(J){this._valid=false;var K=false;A.each(J,function(M,L){if(this._groups[M]){K=true;this._valid=true;}},this);return K;},initializer:function(J){A.later(100,this,this._createEvents);var K=this.get(B),L;if(!K.get("id")){L=A.stamp(K);K.set("id",L);}K.addClass(G.CSS_PREFIX+"-drop");this.set("groups",this.get("groups"));},destructor:function(){G._unregTarget(this);if(this.shim&&(this.shim!==this.get(B))){this.shim.detachAll();this.shim.remove();this.shim=null;}this.get(B).removeClass(G.CSS_PREFIX+"-drop");this.detachAll();},_deactivateShim:function(){if(!this.shim){return false;}this.get(B).removeClass(G.CSS_PREFIX+"-drop-active-valid");this.get(B).removeClass(G.CSS_PREFIX+"-drop-active-invalid");this.get(B).removeClass(G.CSS_PREFIX+"-drop-over");if(this.get("useShim")){this.shim.setStyles({top:"-999px",left:"-999px",zIndex:"1"});}this.overTarget=false;},_activateShim:function(){if(!G.activeDrag){return false;}if(this.get(B)===G.activeDrag.get(B)){return false;}if(this.get("lock")){return false;}var J=this.get(B);if(this.inGroup(G.activeDrag.get("groups"))){J.removeClass(G.CSS_PREFIX+"-drop-active-invalid");J.addClass(G.CSS_PREFIX+"-drop-active-valid");G._addValid(this);this.overTarget=false;if(!this.get("useShim")){this.shim=this.get(B);}this.sizeShim();}else{G._removeValid(this);J.removeClass(G.CSS_PREFIX+"-drop-active-valid");J.addClass(G.CSS_PREFIX+"-drop-active-invalid");}},sizeShim:function(){if(!G.activeDrag){return false;}if(this.get(B)===G.activeDrag.get(B)){return false;}if(this.get("lock")){return false;}if(!this.shim){A.later(100,this,this.sizeShim);return false;}var O=this.get(B),M=O.get(F),K=O.get(C),Q=O.getXY(),P=this.get("padding"),J,N,L;K=K+P.left+P.right;M=M+P.top+P.bottom;Q[0]=Q[0]-P.left;Q[1]=Q[1]-P.top;if(G.activeDrag.get("dragMode")===G.INTERSECT){J=G.activeDrag;N=J.get(B).get(F);L=J.get(B).get(C);M=(M+N);K=(K+L);Q[0]=Q[0]-(L-J.deltaXY[0]);Q[1]=Q[1]-(N-J.deltaXY[1]);}if(this.get("useShim")){this.shim.setStyles({height:M+"px",width:K+"px",top:Q[1]+"px",left:Q[0]+"px"});}this.region={"0":Q[0],"1":Q[1],area:0,top:Q[1],right:Q[0]+K,bottom:Q[1]+M,left:Q[0]};},_createShim:function(){if(!G._pg){A.later(10,this,this._createShim);return;}if(this.shim){return;}var J=this.get("node");if(this.get("useShim")){J=A.Node.create('<div id="'+this.get(B).get("id")+'_shim"></div>');J.setStyles({height:this.get(B).get(F)+"px",width:this.get(B).get(C)+"px",backgroundColor:"yellow",opacity:".5",zIndex:"1",overflow:"hidden",top:"-900px",left:"-900px",position:"absolute"});G._pg.appendChild(J);J.on("mouseover",A.bind(this._handleOverEvent,this));J.on("mouseout",A.bind(this._handleOutEvent,this));}this.shim=J;},_handleTargetOver:function(){if(G.isOverTarget(this)){this.get(B).addClass(G.CSS_PREFIX+"-drop-over");
G.activeDrop=this;G.otherDrops[this]=this;if(this.overTarget){G.activeDrag.fire("drag:over",{drop:this,drag:G.activeDrag});this.fire(I,{drop:this,drag:G.activeDrag});}else{if(G.activeDrag.get("dragging")){this.overTarget=true;this.fire(H,{drop:this,drag:G.activeDrag});G.activeDrag.fire("drag:enter",{drop:this,drag:G.activeDrag});G.activeDrag.get(B).addClass(G.CSS_PREFIX+"-drag-over");}}}else{this._handleOut();}},_handleOverEvent:function(){this.shim.setStyle("zIndex","999");G._addActiveShim(this);},_handleOutEvent:function(){this.shim.setStyle("zIndex","1");G._removeActiveShim(this);},_handleOut:function(J){if(!G.isOverTarget(this)||J){if(this.overTarget){this.overTarget=false;if(!J){G._removeActiveShim(this);}if(G.activeDrag){this.get(B).removeClass(G.CSS_PREFIX+"-drop-over");G.activeDrag.get(B).removeClass(G.CSS_PREFIX+"-drag-over");this.fire(D);G.activeDrag.fire("drag:exit",{drop:this});delete G.otherDrops[this];}}}}});A.DD.Drop=E;},"3.2.0PR1",{requires:["dd-ddm-drop","dd-drag"],skinnable:false});YUI.add("dd-delegate",function(E){var D=function(F){D.superclass.constructor.apply(this,arguments);},C="container",B="nodes",A=E.Node.create("<div>Temp Node</div>");E.extend(D,E.Base,{_bubbleTargets:E.DD.DDM,dd:null,_shimState:null,_handles:null,_onNodeChange:function(F){this.set("dragNode",F.newVal);},_afterDragEnd:function(F){E.DD.DDM._noShim=this._shimState;this.set("lastNode",this.dd.get("node"));this.get("lastNode").removeClass(E.DD.DDM.CSS_PREFIX+"-dragging");this.dd._unprep();this.dd.set("node",A);this.dd._fixIEMouseUp();},_delMouseDown:function(H){var G=H.currentTarget,F=this.dd;if(G.test(this.get(B))&&!G.test(this.get("invalid"))){this._shimState=E.DD.DDM._noShim;E.DD.DDM._noShim=true;this.set("currentNode",G);F.set("node",G);if(F.proxy){F.set("dragNode",E.DD.DDM._proxy);}else{F.set("dragNode",G);}F._prep();F.fire("drag:mouseDown",{ev:H});}},_onMouseEnter:function(F){this._shimState=E.DD.DDM._noShim;E.DD.DDM._noShim=true;},_onMouseLeave:function(F){E.DD.DDM._noShim=this._shimState;},initializer:function(G){this._handles=[];var H=this.get("dragConfig")||{},F=this.get(C);H.node=A.cloneNode(true);H.bubbleTargets=this;if(this.get("handles")){H.handles=this.get("handles");}this.dd=new E.DD.Drag(H);this.dd.after("drag:end",E.bind(this._afterDragEnd,this));this.dd.on("dragNodeChange",E.bind(this._onNodeChange,this));this._handles.push(E.delegate(E.DD.Drag.START_EVENT,E.bind(this._delMouseDown,this),F,this.get(B)));this._handles.push(E.on("mouseenter",E.bind(this._onMouseEnter,this),F));this._handles.push(E.on("mouseleave",E.bind(this._onMouseLeave,this),F));E.later(50,this,this.syncTargets);E.DD.DDM.regDelegate(this);},syncTargets:function(){if(!E.Plugin.Drop||this.get("destroyed")){return;}var G,F,H;if(this.get("target")){G=E.one(this.get(C)).all(this.get(B));F=this.dd.get("groups");H=this.get("dragConfig");if(H&&"groups" in H){F=H.groups;}G.each(function(I){this.createDrop(I,F);},this);}return this;},createDrop:function(H,F){var G={useShim:false,bubbleTargets:this};if(!H.drop){H.plug(E.Plugin.Drop,G);}H.drop.set("groups",F);return H;},destructor:function(){if(this.dd){this.dd.destroy();}if(E.Plugin.Drop){var F=E.one(this.get(C)).all(this.get(B));F.unplug(E.Plugin.Drop);}E.each(this._handles,function(G){G.detach();});}},{NAME:"delegate",ATTRS:{container:{value:"body"},nodes:{value:".dd-draggable"},invalid:{value:"input, select, button, a, textarea"},lastNode:{value:A},currentNode:{value:A},dragNode:{value:A},over:{value:false},target:{value:false},dragConfig:{value:null},handles:{value:null}}});E.mix(E.DD.DDM,{_delegates:[],regDelegate:function(F){this._delegates.push(F);},getDelegate:function(G){var F=null;G=E.one(G);E.each(this._delegates,function(H){if(G.test(H.get(C))){F=H;}},this);return F;}});E.namespace("DD");E.DD.Delegate=D;},"3.2.0PR1",{optional:["dd-drop-plugin"],requires:["dd-drag","event-mouseenter"],skinnable:false});YUI.add("dd",function(A){},"3.2.0PR1",{use:["dd-ddm-base","dd-ddm","dd-ddm-drop","dd-drag","dd-proxy","dd-constrain","dd-drop","dd-scroll","dd-delegate"],skinnable:false});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.2.0PR1
build: nightly
*/
YUI.add("dd-drop-plugin",function(A){var B=function(C){C.node=C.host;B.superclass.constructor.apply(this,arguments);};B.NAME="dd-drop-plugin";B.NS="drop";A.extend(B,A.DD.Drop);A.namespace("Plugin");A.Plugin.Drop=B;},"3.2.0PR1",{requires:["dd-drop"],skinnable:false});AUI.add("aui-editable",function(D){var H=D.Lang,B=H.isFunction,E=D.ClassNameManager.getClassName,F="hover",K="editable",C=E(K,"editing"),G=E(K,F),I="contentBox";var J=D.Component.create({NAME:K,ATTRS:{cancelButton:{valueFn:function(){var A=this;return{id:"cancel",icon:"circle-close",handler:{context:A,fn:A.cancel}};}},contentText:{value:"",setter:function(L){var A=this;L=H.trim(L);A._toText(L);return L;}},formatInput:{value:null,validator:B},formatOutput:{value:null,validator:B},node:{setter:function(L){var A=D.one(L);if(!A){D.error("AUI.Editable: Invalid Node Given: "+L);}else{A=A.item(0);}return A;}},eventType:{value:"click"},renderTo:{value:document.body,setter:function(M){var A=this;var L;if(M=="node"){L=A.get(M);}else{L=D.one(M);}if(!L){D.error("AUI.Editable: Invalid renderTo Given: "+M);}else{L=L.item(0);}return L;}},saveButton:{valueFn:function(){var A=this;return{id:"save",icon:"circle-check",handler:{context:A,fn:A.save}};}},icons:{value:[]},inputType:{value:"text",setter:function(L){var A=this;if(L!="text"&&L!="textarea"){L=D.Attribute.INVALID_VALUE;}return L;}},visible:{value:false}},UI_ATTRS:["node"],prototype:{initializer:function(){var A=this;A._uiSetNode(A.get("node"));A._createEvents();},renderUI:function(){var A=this;var L=A.get(I);var N=A.get("inputType");var P={};var M=A.get("icons");if(M!==false){var R=A.get("cancelButton");var O=A.get("saveButton");if(R!==false){M.push(R);}if(O!==false){M.push(O);}P.icons=M;}if(N!="text"){D.mix(P,{field:{autoSize:true},fieldWidget:D.Textarea});}var Q=new D.Combobox(P).render(L);A._comboBox=Q;A.inputNode=Q.get("node");},bindUI:function(){var A=this;var L=A.get(I);var N=A.get("node");var M=A.inputNode;M.on("keypress",A._onKeypressEditable,A);A.after("contentTextChange",A._syncContentText);L.swallowEvent("click");D.getDoc().after("click",A._afterFocusedChangeEditable,A);},syncUI:function(){var A=this;var L=A.get("node").get("innerHTML");L=L.replace(/\n|\r/gim,"");L=H.trim(L);L=A._toText(L);A._setInput(L);A.set("contentText",L,{initial:true});},cancel:function(){var A=this;A.fire("cancel");},save:function(L){var A=this;A.fire("save");},_afterFocusedChangeEditable:function(L){var A=this;A.fire("stopEditing",A.get("visible"));},_createEvents:function(){var A=this;A.publish("startEditing",{bubbles:true,defaultFn:A._defStartEditingFn,emitFacade:true,queable:false});A.publish("stopEditing",{bubbles:true,defaultFn:A._defStopEditingFn,emitFacade:true,queable:false});A.publish("save",{bubbles:true,defaultFn:A._defSaveFn,emitFacade:true,queable:false});A.publish("cancel",{bubbles:true,defaultFn:A._defCancelFn,emitFacade:true,queable:false});},_defCancelFn:function(L){var A=this;A.fire("stopEditing",false);},_defStartEditingFn:function(A){var R=this;var O=R.get("boundingBox");var N=R.get("node");var P=R.inputNode;var L=N.get("offsetHeight");var Q=N.get("offsetWidth");R.show();N.addClass(C);var S=N.getXY();O.setStyles({height:L+"px",left:S[0]+"px",top:S[1]+"px",width:Q+"px"});var M=R._comboBox._field;M.set("width",Q);M.fire("adjustSize");P.focus();P.select();},_defStopEditingFn:function(M,L){var A=this;A.hide();A.get("node").removeClass(C);if(L){A.set("contentText",A.inputNode.get("value"));}else{A._setInput(A.get("contentText"));}},_defSaveFn:function(L){var A=this;A.fire("stopEditing",true);},_onKeypressEditable:function(L){var A=this;var M=L.keyCode;if(M==27){L.preventDefault();A.cancel();}else{if(M==13&&(A.get("inputType")=="text")){A.save();}}},_onMouseEnterEditable:function(L){var A=this;A.get("node").addClass(G);},_onMouseLeaveEditable:function(L){var A=this;A.get("node").removeClass(G);},_setInput:function(M){var A=this;var L=A.get("formatInput");if(L){M=L.call(A,M);}else{M=A._toText(M);}A.inputNode.set("value",M);},_setOutput:function(M){var L=this;var A=L.get("formatOutput");if(A){M=A.call(L,M);}else{M=L._toHTML(M);}L.get("node").set("innerHTML",M);},_startEditing:function(L){var A=this;if(!A.get("rendered")){A.render(A.get("renderTo"));}A.fire("startEditing");L.halt();},_syncContentText:function(M){var A=this;if(!M.initial){var L=M.newVal;A._setInput(L);A._setOutput(L);}},_toHTML:function(L){var A=this;return String(L).replace(/\n/gim,"<br/>");},_toText:function(L){var A=this;L=String(L);L=L.replace(/<br\s*\/?>/gim,"\n");L=L.replace(/(<\/?[^>]+>|\t)/gim,"");return L;},_uiSetNode:function(M){var A=this;if(A._mouseEnterHandler){A._mouseEnterHandler.detach();}if(A._mouseLeaveHandler){A._mouseLeaveHandler.detach();}if(A._interactionHandler){A._interactionHandler.detach();}var L=A.get("eventType");A._mouseEnterHandler=M.on("mouseenter",A._onMouseEnterEditable,A);A._mouseLeaveHandler=M.on("mouseleave",A._onMouseLeaveEditable,A);A._interactionHandler=M.on(L,A._startEditing,A);}}});D.Editable=J;},"1.0.1",{requires:["aui-base","aui-form-combobox"],skinnable:true});AUI.add("aui-form-combobox",function(B){var F=B.Lang,D=B.ClassNameManager.getClassName,G="combobox",E=D(G);var C=B.Component.create({NAME:G,ATTRS:{field:{},fieldWidget:{value:B.Textfield},node:{getter:function(){var A=this;if(A._field){return A._field.get("node");}}},icons:{value:["circle-triangle-b"],validator:F.isArray}},prototype:{renderUI:function(){var A=this;C.superclass.renderUI.call(A);A._renderField();A._renderIcons();},_renderField:function(){var A=this;var H=A.get("contentBox");var I=A.get("field");var J=A.get("fieldWidget");A._field=new J(I).render();H.appendChild(A._field.get("boundingBox"));},_renderIcons:function(){var A=this;var H=A.get("icons");if(H.length){var I=new B.Toolbar({children:H}).render(A.get("contentBox"));A.icons=I;}}}});B.Combobox=C;},"1.0.1",{skinnable:true,requires:["aui-form-textarea","aui-toolbar"]});AUI.add("aui-toolbar",function(D){var L=D.Lang,C=L.isString,G="horizontal",R="toolbar",N="orientation",J="vertical",F=D.ClassNameManager.getClassName,I=F(R,"first"),B=F(R,G),P=F(R,"item"),H=F(R,"item","content"),O=F(R,"last"),E=F(R,J),Q="<span></span>";var K=D.Component.create({NAME:R,ATTRS:{activeState:{},defaultState:{},hoverState:{},defaultChildType:{value:"ButtonItem"},orientation:{value:G,validator:function(A){return C(A)&&(A===G||A===J);}}},UI_ATTRS:[N],prototype:{BOUNDING_TEMPLATE:Q,CONTENT_TEMPLATE:Q,initializer:function(){var A=this;D.Do.before(A._addByIconId,A,"add");},bindUI:function(){var A=this;A.on("addChild",A._onAddButton);A.after("addChild",A._afterAddButton);A.after("removeChild",A._afterRemoveButton);},syncUI:function(){var A=this;var S=A.size()-1;A.each(function(U,T,V){var W=U.get("boundingBox");W.toggleClass(I,T==0);W.toggleClass(O,T==S);W.addClass(P);});},_addByIconId:function(S){var A=this;if(L.isString(S)){var T={icon:S};return new D.Do.AlterArgs(null,[T]);}},_afterAddButton:function(S){var A=this;A.syncUI();},_afterRemoveButton:function(S){var A=this;S.child.destroy();A.syncUI();},_uiSetOrientation:function(U){var A=this;var T=A.get("boundingBox");var S=(U==G);T.toggleClass(B,S);T.toggleClass(E,!S);}}});var M=function(){var A=this;A._CHILD_MAP=new D.DataSet();A.on("addChild",A._onAddChildById);A.after("addChild",A._afterAddChildById);A.after("removeChild",A._afterRemoveChildById);D.Do.before(A._findById,A,"item");D.Do.before(A._findById,A,"remove");};M.prototype={_afterAddChildById:function(S){var A=this;var T=S.child.get("id");A._CHILD_MAP.insert(S.index,T,S.child);},_afterRemoveChildById:function(S){var A=this;var T=S.child.get("id");A._CHILD_MAP.removeKey(T);},_findById:function(T){var A=this;if(L.isString(T)){var S=A._CHILD_MAP.indexOfKey(T);return new D.Do.AlterArgs(null,[S]);}},_getItemById:function(T){var A=this;var S=-1;if(L.isString(T)){S=A._CHILD_MAP[T];}return S;},_onAddChildById:function(S){var A=this;var T=S.child.get("id");if(A._CHILD_MAP.indexOfKey(T)>-1){S.preventDefault();}}};D.Toolbar=D.Base.build(R,K,[D.WidgetParent,M],{dynamic:false});},"1.0.1",{skinnable:true,requires:["aui-base","aui-button-item","aui-data-set","widget-parent"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.2.0PR1
build: nightly
*/
YUI.add("widget-parent",function(C){var B=C.Lang;function A(D){this.publish("addChild",{defaultTargetOnly:true,defaultFn:this._defAddChildFn});this.publish("removeChild",{defaultTargetOnly:true,defaultFn:this._defRemoveChildFn});this._items=[];var E,F;if(D&&D.children){E=D.children;F=this.after("initializedChange",function(G){this._add(E);F.detach();});}C.after(this._renderChildren,this,"renderUI");C.after(this._bindUIParent,this,"bindUI");C.before(this._destroyChildren,this,"destructor");this.after("selectionChange",this._afterSelectionChange);this.after("selectedChange",this._afterParentSelectedChange);this.after("activeDescendantChange",this._afterActiveDescendantChange);this._hDestroyChild=this.after("*:destroy",this._afterDestroyChild);this.after("*:focusedChange",this._updateActiveDescendant);}A.ATTRS={defaultChildType:{setter:function(F){var D=C.Attribute.INVALID_VALUE,E=B.isString(F)?C[F]:F;if(B.isFunction(E)){D=E;}return D;}},activeDescendant:{readOnly:true},multiple:{value:false,validator:B.isBoolean,writeOnce:true,getter:function(E){var D=this.get("root");return(D&&D!=this)?D.get("multiple"):E;}},selection:{readOnly:true,setter:"_setSelection",getter:function(E){var D=B.isArray(E)?(new C.ArrayList(E)):E;return D;}},selected:{setter:function(E){var D=E;if(E===1&&!this.get("multiple")){D=C.Attribute.INVALID_VALUE;}return D;}}};A.prototype={_afterDestroyChild:function(D){var E=D.target;if(E.get("parent")==this){E.remove();}},_afterSelectionChange:function(F){if(F.target==this&&F.src!=this){var D=F.newVal,E=0;if(D){E=2;if((D instanceof C.ArrayList)&&(D.size()===this.size())){E=1;}}this.set("selected",E,{src:this});}},_afterActiveDescendantChange:function(E){var D=this.get("parent");if(D){D._set("activeDescendant",E.newVal);}},_afterParentSelectedChange:function(D){var E=D.newVal;if(this==D.target&&D.src!=this&&(E===0||E===1)){this.each(function(F){F.set("selected",E,{src:this});},this);}},_setSelection:function(F){var E=null,D;if(this.get("multiple")&&!this.isEmpty()){D=[];this.each(function(G){if(G.get("selected")>0){D.push(G);}});if(D.length>0){E=D;}}else{if(F.get("selected")>0){E=F;}}return E;},_updateSelection:function(E){var F=E.target,D;if(F.get("parent")==this){if(E.src!="_updateSelection"){D=this.get("selection");if(!this.get("multiple")&&D&&E.newVal>0){D.set("selected",0,{src:"_updateSelection"});}this._set("selection",F);}if(E.src==this){this._set("selection",F,{src:this});}}},_updateActiveDescendant:function(D){var E=(D.newVal===true)?D.target:null;this._set("activeDescendant",E);},_createChild:function(D){var I=this.get("defaultChildType"),F=D.type,H,E,G;if(F){E=B.isString(F)?C[F]:F;if(B.isFunction(E)){G=E;}}else{if(I){G=I;}}if(G){H=new G(D);}else{C.error("Could not create a child instance because its constructor is either undefined or invalid.");}return H;},_defAddChildFn:function(F){var G=F.child,D=F.index,E=this._items;if(G.get("parent")){G.remove();}if(B.isNumber(D)){E.splice(D,0,G);}else{E.push(G);}G._set("parent",this);G.addTarget(this);F.index=G.get("index");G.after("selectedChange",C.bind(this._updateSelection,this));},_defRemoveChildFn:function(F){var G=F.child,D=F.index,E=this._items;if(G.get("focused")){G.set("focused",false);}if(G.get("selected")){G.set("selected",0);}E.splice(D,1);G.removeTarget(this);G._set("parent",null);},_add:function(H,D){var E,G,F;if(B.isArray(H)){E=[];C.each(H,function(J,I){G=this._add(J,(D+I));if(G){E.push(G);}},this);if(E.length>0){F=E;}}else{if(H instanceof C.Widget){G=H;}else{G=this._createChild(H);}if(G&&this.fire("addChild",{child:G,index:D})){F=G;}}return F;},add:function(){var E=this._add.apply(this,arguments),D=E?(B.isArray(E)?E:[E]):[];return(new C.ArrayList(D));},remove:function(D){var F=this._items[D],E;if(F&&this.fire("removeChild",{child:F,index:D})){E=F;}return E;},removeAll:function(){var D=[],E;C.each(this._items.concat(),function(){E=this.remove(0);if(E){D.push(E);}},this);return(new C.ArrayList(D));},selectChild:function(D){this.item(D).set("selected",1);},selectAll:function(){this.set("selected",1);},deselectAll:function(){this.set("selected",0);},_uiAddChild:function(I,D){I.render(D);var G=I.get("boundingBox"),F,H=I.next(false),E;if(H){F=H.get("boundingBox");F.insert(G,"before");}else{E=I.previous(false);if(E){F=E.get("boundingBox");F.insert(G,"after");}}},_uiRemoveChild:function(D){D.get("boundingBox").remove();},_afterAddChild:function(D){var E=D.child;if(E.get("parent")==this){this._uiAddChild(E,this._childrenContainer);}},_afterRemoveChild:function(D){var E=D.child;if(E.get("parent")==this){this._uiRemoveChild(E);}},_bindUIParent:function(){this.after("addChild",this._afterAddChild);this.after("removeChild",this._afterRemoveChild);},_renderChildren:function(){var D=this._childrenContainer||this.get("contentBox");this._childrenContainer=D;this.each(function(E){E.render(D);});},_destroyChildren:function(){this._hDestroyChild.detach();this.each(function(D){D.destroy();});}};C.augment(A,C.ArrayList);C.WidgetParent=A;},"3.2.0PR1",{requires:["base-build","arraylist","widget"]});AUI.add("aui-data-set",function(B){var D=B.Lang;var C=function(){C.superclass.constructor.apply(this,arguments);};C.NAME="dataset";C.ATTRS={keys:{getter:function(E){var A=this;return A.keys;}},first:{getter:function(){var A=this;var E=A.values;return E[0];}},includeFunctions:{value:false},items:{value:null,getter:function(){var A=this;return A.collection||{};}},last:{getter:function(){var A=this;var E=A.values;return E[E.length-1];}},getKey:{lazyAdd:false,value:null,getter:function(E){var A=this;return E||A.getKey;},setter:function(E){var A=this;if(D.isFunction(E)){A.getKey=E;}return A.getKey;}},values:{getter:function(E){var A=this;return A.values;},readOnly:true}};B.extend(C,B.Base,{initializer:function(){var A=this;A.collection={};A.keys=[];A.values=[];A.length=0;A.publish("add",{defaultFn:A._defaultAddFn});A.publish("clear",{defaultFn:A._defaultClearFn});A.publish("remove",{defaultFn:A._defaultRemoveFn});A.publish("replace",{defaultFn:A._defaultReplaceFn});A.publish("sort",{defaultFn:A._defaultSortFn});},add:function(E,G){var A=this;if(arguments.length==1){G=E;E=A.getKey(G);}if(!D.isNull(E)&&!D.isUndefined(E)){var H=A.collection[E];if(!D.isUndefined(H)){return A.replace(E,G);}}var F=A.length;A.fire("add",{index:F,attrName:E,item:G,newVal:G});},addAll:function(I){var A=this;var E=arguments;var H=E.length;if(H==1){E=I;}if(H>1||D.isArray(I)){H=E.length;for(var F=0;F<H;F++){A.add(E[F]);}}else{for(var F in I){var G=I[F];A.add(F,G);}}},clear:function(){var A=this;A.fire("clear");},clone:function(){var A=this;var I=new C();var H=A.keys;var E=A.values;var G=E.length;for(var F=0;F<G;F++){I.add(H[F],E[F]);}I.set("getKey",A.get("getKey"));return I;},contains:function(E){var A=this;return A.indexOf(E)>-1;},containsKey:function(E){var A=this;return !(D.isUndefined(A.collection[E]));},each:function(F,E){var A=this;return A._each(A.values,F,E);},eachKey:function(F,E){var A=this;var G=A.keys;return A._each(G,F,E);},filter:function(J,A){var M=this;var I=new C();I.set("getKey",M.get("getKey"));var H=M.collection;var O=M.keys;var L=M.values;A=A||M;var K=I.collection;var F=I.values;var E=L.length;var N;for(var G=0;G<E;G++){N=L[G];if(J.call(A,N,G,H)){I.add(O[G],N);}}I.length=F.length;return I;},filterBy:function(H,I,G,E){var A=this;if(D.isUndefined(I)||D.isNull(I)||((D.isArray(I)||D.isString(I))&&!I.length)){return A.clone();}I=A._generateRegEx(I,G,E);var F=B.bind(A._keyFilter,A,H,I);return A.filter(F);},find:function(F,E){var A=this;return B.Array.find(A.values,F,E);},findIndex:function(H,G,K){var A=this;var J=A.collection;var E=A.values;var I=A.length;K=K||0;for(var F=K;F<I;F++){if(H.call(G,E[F],F,J)){return F;}}return -1;},findIndexBy:function(H,I,J,G,E){var A=this;if(D.isUndefined(I)||D.isNull(I)||((D.isArray(I)||D.isString(I))&&!I.length)){return -1;}I=A._generateRegEx(I,G,E);var F=B.bind(A._keyFilter,A,H,I);return A.findIndex(F,null,J);},getKey:function(E){var A=this;return(E.get&&E.get("id"))||E.id;},indexOf:function(E){var A=this;return B.Array.indexOf(A.values,E);},indexOfKey:function(E){var A=this;return B.Array.indexOf(A.keys,E);},insert:function(E,F,G){var A=this;if(arguments.length==2){G=arguments[1];F=A.getKey(G);}if(A.containsKey(F)){A.removeKey(F);}A.fire("add",{index:E,attrName:F,item:G,newVal:G});},invoke:function(K,F){var A=this;var E=A.values;var I=E.length;if(!F){F=[];}else{F=[].concat(F);}for(var G=0;G<I;G++){var H=E[G];var J=H&&H[K];if(D.isFunction(J)){J.apply(H,F);}}return A;},item:function(F){var A=this;var G;if(D.isNumber(F)){var E=A.values;G=E[F];}else{G=A.collection[F];}return G;},keySort:function(F,E){var A=this;A.fire("sort",{direction:F,fn:E||A._keySorter,type:"key"});},remove:function(F){var A=this;var E=A.indexOf(F);return A.removeAt(E);},removeAt:function(E){var A=this;if(E<A.length&&E>=0){var G=A.values[E];var F=A.keys[E];A.fire("remove",{index:E,attrName:F,item:G,prevVal:G});}},removeKey:function(F){var A=this;var E=A.indexOfKey(F);return A.removeAt(E);},replace:function(F,G){var A=this;if(arguments.length==1){G=F;F=A.getKey(G);}var H=A.collection[F];if(D.isUndefined(F)||D.isNull(F)||D.isUndefined(H)){return A.add(F,G);}var E=A.indexOfKey(F);A.fire("replace",{attrName:F,index:E,item:G,prevVal:H,newVal:G});},size:function(){var A=this;return A.length;},slice:function(G,E){var A=this;var F=A.values;return F.slice.apply(F,arguments);},sort:function(F,E){var A=this;A.fire("sort",{direction:F,fn:E,type:"value"});},_defaultAddFn:function(G){var A=this;var F=G.attrName;var H=G.item;var E=G.index;if(!D.isNull(F)&&!D.isUndefined(F)){if(A.get("includeFunctions")||!D.isFunction(H)){A.collection[F]=H;}}A.keys.splice(E,0,F);A.values.splice(E,0,H);++A.length;},_defaultClearFn:function(E){var A=this;A.collection={};A.keys=[];A.values=[];A.length=0;},_defaultRemoveFn:function(H){var A=this;var E=H.index;var I=H.item;var F=H.attrName;var J=A.collection;var G=A.keys;A.values.splice(E,1);if(!D.isUndefined(F)){delete J[F];}G.splice(E,1);A.length--;},_defaultReplaceFn:function(F){var A=this;var E=F.attrName;var G=F.item;A.collection[E]=G;},_defaultSortFn:function(E){var A=this;A._sortBy(E.type,E.direction,E.fn);},_each:function(E,I,H){var A=this;var F=E.slice(0);var J=F.length;H=H||A;for(var G=0;G<J;G++){if(I.call(H,F[G],G,F)===false){return false;}}return true;},_generateRegEx:function(I,H,F){var E=this;if(!(I instanceof RegExp)){I=String(I);var A=[];if(H!==false){A.push("^");}A.push(I);var G;if(!F){G="i";}I=new RegExp(A.join(""),G);}return I;},_keyFilter:function(F,H,G,E,I){var A=this;return G&&H.test(G[F]);},_keySorter:function(H,F){var E=this;var G=String(H).toLowerCase();var A=String(F).toLowerCase();var I=0;if(G>A){I=1;}else{if(G<A){I=-1;}}return I;},_sortBy:function(M,I,H){var O=this;var J=1;var G=[];var Q=O.keys;var N=O.values;var A=N.length;H=H||B.Array.numericSort;if(String(I).toLowerCase()=="desc"){J=-1;}for(var E=0;E<A;E++){G.push({key:Q[E],value:N[E],index:E});}G.sort(function(S,R){var T=H(S[M],R[M])*J;if(T===0){T=1;if(S.index<R.index){T=-1;}}return T;});A=G.length;var F={};for(var E=0;
E<A;E++){var P=G[E];var L=P.key;var K=P.value;F[L]=K;Q[E]=L;N[E]=K;}O.collection=F;}});B.DataSet=C;},"1.0.1",{skinnable:false,requires:["oop","collection","base"]});AUI.add("aui-form-textarea",function(C){var F=C.Lang,D=C.ClassNameManager.getClassName,L="textarea",I=D(L),E=[D(L,"height","monitor"),D("field","text","input"),D("helper","hidden","accessible")].join(" "),M="&nbsp;&nbsp;",J="&nbsp;\n&nbsp;",B='<pre class="'+E+'">',K="</pre>",H='<textarea autocomplete="off" class="{cssClass}" name="{name}"></textarea>';var G=C.Component.create({NAME:L,ATTRS:{autoSize:{value:true},height:{value:"auto"},maxHeight:{value:1000,setter:"_setAutoDimension"},minHeight:{value:45,setter:"_setAutoDimension"},width:{value:"auto",setter:"_setAutoDimension"}},HTML_PARSER:{node:"textarea"},EXTENDS:C.Textfield,prototype:{FIELD_TEMPLATE:H,renderUI:function(){var A=this;G.superclass.renderUI.call(A);if(A.get("autoSize")){A._renderHeightMonitor();}},bindUI:function(){var A=this;G.superclass.bindUI.call(A);if(A.get("autoSize")){A.get("node").on("keyup",A._onKeyup,A);}A.after("adjustSize",A._uiAutoSize);A.after("heightChange",A._afterHeightChange);A.after("widthChange",A._afterWidthChange);},syncUI:function(){var N=this;G.superclass.syncUI.call(N);N._setAutoDimension(N.get("minHeight"),"minHeight");N._setAutoDimension(N.get("maxHeight"),"maxHeight");var O=N.get("width");var A=N.get("minHeight");N._setAutoDimension(O,"width");N._uiSetDim("height",A);N._uiSetDim("width",O);},_afterHeightChange:function(N){var A=this;A._uiSetDim("height",N.newVal,N.prevVal);},_afterWidthChange:function(N){var A=this;A._uiSetDim("width",N.newVal,N.prevVal);},_onKeyup:function(N){var A=this;A.fire("adjustSize");},_renderHeightMonitor:function(){var N=this;var P=C.Node.create(B+K);var R=N.get("node");C.getBody().append(P);N._heightMonitor=P;var A=R.getComputedStyle("fontFamily");var S=R.getComputedStyle("fontSize");var O=R.getComputedStyle("fontWeight");var Q=R.getComputedStyle("fontSize");R.setStyle("height",N.get("minHeight")+"px");P.setStyles({fontFamily:A,fontSize:S,fontWeight:O});if("outerHTML" in P.getDOM()){N._updateContent=N._updateOuterContent;}else{N._updateContent=N._updateInnerContent;}},_setAutoDimension:function(O,N){var A=this;A["_"+N]=O;},_uiAutoSize:function(){var N=this;var R=N.get("node");var O=N._heightMonitor;var S=N._minHeight;var Q=N._maxHeight;var P=R.val();var T=document.createTextNode(P);O.set("innerHTML","");O.appendChild(T);O.setStyle("width",R.getComputedStyle("width"));P=O.get("innerHTML");if(!P.length){P=M;}else{P+=J;}N._updateContent(P);var A=Math.max(O.get("offsetHeight"),S);A=Math.min(A,Q);if(A!=N._lastHeight){N._lastHeight=A;N._uiSetDim("height",A);}},_uiSetDim:function(O,N){var A=this;var P=A.get("node");if(F.isNumber(N)){N+="px";}P.setStyle(O,N);},_updateInnerContent:function(N){var A=this;return A._heightMonitor.set("innerHTML",N);},_updateOuterContent:function(N){var A=this;N=N.replace(/\n/g,"<br />");return A._updateInnerContent(N);}}});C.Textarea=G;},"1.0.1",{skinnable:true,requires:["aui-form-textfield"]});AUI.add("aui-form-textfield",function(B){var F=B.Lang,C=B.ClassNameManager.getClassName,G="textfield",D=C(G);var E=B.Component.create({NAME:G,ATTRS:{selectOnFocus:{value:false},allowOnly:{value:null,validator:function(H){var A=this;return H instanceof RegExp;}},defaultValue:{value:""},validator:{value:null}},EXTENDS:B.Field,prototype:{bindUI:function(){var A=this;E.superclass.bindUI.call(A);var I=A.get("node");if(A.get("allowOnly")){I.on("keypress",A._filterInputText,A);}if(A.get("selectOnFocus")){I.on("focus",A._selectInputText,A);}var H=A.get("defaultValue");if(H){I.on("blur",A._checkDefaultValue,A);I.on("focus",A._checkDefaultValue,A);}},syncUI:function(){var A=this;var I=A.get("value");if(!I){var H=A.get("defaultValue");A.set("value",A.get("defaultValue"));}E.superclass.syncUI.apply(A,arguments);},_filterInputText:function(J){var A=this;var H=A.get("allowOnly");var I=String.fromCharCode(J.charCode);if(!H.test(I)){J.halt();}},_checkDefaultValue:function(M){var A=this;var I=A.get("defaultValue");var L=A.get("node");var K=F.trim(A.get("value"));var J=M.type;var H=(J=="focus"||J=="focusin");if(I){var N=K;if(H&&(K==I)){N="";}else{if(!H&&!K){N=I;}}A.set("value",N);}},_selectInputText:function(H){var A=this;H.currentTarget.select();}}});B.Textfield=E;},"1.0.1",{requires:["aui-form-field"]});AUI.add("aui-form-field",function(P){var G=P.Lang,J=P.ClassNameManager.getClassName,H="field",R=P.cached(function(X,Z){var Y=["field"];if(Z){Y.push(Z);}Y=Y.join("-");var A=[J(Y,X)];if(X=="password"){A.push(J(Y,"text"));}return A.join(" ");}),C=J(H),W=J(H,"content"),F=J(H,"input"),N=J(H,"hint"),E=J(H,"invalid"),D=J(H,"label"),B=J(H,"labels"),V=J(H,"labels","inline"),T={left:[B,"left"].join("-"),right:[B,"right"].join("-"),top:[B,"top"].join("-")},L=/left|right/,Q='<span class="'+C+'"></span>',U='<span class="'+W+'"></span>',K='<span class="'+N+'"></span>',O='<input autocomplete="off" class="{cssClass}" id="{id}" name="{name}" type="{type}" />',M='<label class="'+D+'"></label>',S={};var I=P.Component.create({NAME:H,ATTRS:{readOnly:{value:false},name:{value:"",getter:function(X){var A=this;return X||A.get("id");}},id:{getter:function(Y){var A=this;var X=this.get("node");if(X){Y=X.get("id");}if(!Y){Y=P.guid();}return Y;}},type:{value:"text",writeOnce:true},labelAlign:{value:""},labelNode:{valueFn:function(){var A=this;return P.Node.create(M);}},labelText:{valueFn:function(){var A=this;return A.get("labelNode").get("innerHTML");},setter:function(X){var A=this;A.get("labelNode").set("innerHTML",X);return X;}},node:{value:null,setter:function(X){var A=this;return P.one(X)||A._createFieldNode();}},fieldHint:{value:""},fieldHintNode:{value:null,setter:function(X){var A=this;return P.one(X)||A._createFieldHint();}},prevVal:{value:""},valid:{value:true,getter:function(Z){var A=this;var X=A.get("validator");var Y=A.get("disabled")||X(A.get("value"));return Y;}},dirty:{value:false,getter:function(Y){var A=this;if(A.get("disabled")){Y=false;}else{var X=String(A.get("value"));var Z=String(A.get("prevVal"));Y=(X!==Z);}return Y;}},size:{},validator:{valueFn:function(){var A=this;return A.fieldValidator;},validator:G.isFunction},value:{getter:"_getNodeValue",setter:"_setNodeValue",validator:"fieldValidator"}},HTML_PARSER:{labelNode:"label",node:"input, textarea, select"},BIND_UI_ATTRS:["id","readOnly","name","size","tabIndex","type","value"],getTypeClassName:R,getField:function(Z){var a=null;if(Z instanceof P.Field){a=Z;}else{if(Z&&(G.isString(Z)||Z instanceof P.Node||Z.nodeName)){var X=P.one(Z).get("id");a=S[X];if(!a){var Y=Z.ancestor(".aui-field");var A=Z.ancestor(".aui-field-content");a=new I({boundingBox:Y,contentBox:A,node:Z});}}else{if(G.isObject(Z)){a=new I(Z);}}}return a;},prototype:{BOUNDING_TEMPLATE:Q,CONTENT_TEMPLATE:U,FIELD_TEMPLATE:O,FIELD_TYPE:"text",initializer:function(){var A=this;var X=A.get("node").guid();S[X]=A;},renderUI:function(){var A=this;A._renderField();A._renderLabel();A._renderFieldHint();},bindUI:function(){var A=this;A.after("labelAlignChange",A._afterLabelAlignChange);A.after("fieldHintChange",A._afterFieldHintChange);},syncUI:function(){var A=this;A.set("prevVal",A.get("value"));},fieldValidator:function(X){var A=this;return true;},isValid:function(){var A=this;return A.get("valid");},isDirty:function(){var A=this;return A.get("dirty");},resetValue:function(){var A=this;A.set("value",A.get("prevVal"));A.clearInvalid();},markInvalid:function(X){var A=this;A.set("fieldHint",X);A.get("fieldHintNode").show();A.get("boundingBox").addClass(E);},clearInvalid:function(){var A=this;A.reset("fieldHint");if(!A.get("fieldHint")){A.get("fieldHintNode").hide();}A.get("boundingBox").removeClass(E);},validate:function(){var A=this;var X=A.get("valid");if(X){A.clearInvalid();}return X;},_afterFieldHintChange:function(X){var A=this;A._uiSetFieldHint(X.newVal,X.prevVal);},_afterLabelAlignChange:function(X){var A=this;A._uiSetLabelAlign(X.newVal,X.prevVal);},_createFieldHint:function(){var A=this;var X=P.Node.create(K);A.get("contentBox").append(X);return X;},_createFieldNode:function(){var A=this;var X=A.FIELD_TEMPLATE;A.FIELD_TEMPLATE=P.substitute(X,{cssClass:F,id:A.get("id"),name:A.get("name"),type:A.get("type")});return P.Node.create(A.FIELD_TEMPLATE);},_getNodeValue:function(){var A=this;return A.get("node").val();},_renderField:function(){var A=this;var a=A.get("node");a.val(A.get("value"));var Y=A.get("boundingBox");var X=A.get("contentBox");var Z=A.get("type");Y.addClass(R(Z));a.addClass(R(Z,"input"));if(!X.contains(a)){if(a.inDoc()){a.placeBefore(Y);X.appendChild(a);}else{X.appendChild(a);}}Y.removeAttribute("tabIndex");},_renderFieldHint:function(){var A=this;var X=A.get("fieldHint");if(X){A._uiSetFieldHint(X);}},_renderLabel:function(){var A=this;var a=A.get("labelText");if(a!==false){var Z=A.get("node");var b=Z.guid();a=A.get("labelText");var Y=A.get("labelNode");Y.addClass(J(A.name,"label"));Y.setAttribute("for",b);Y.set("innerHTML",a);A._uiSetLabelAlign(A.get("labelAlign"));var X=A.get("contentBox");X.prepend(Y);}},_setNodeValue:function(X){var A=this;A._uiSetValue(X);return X;},_uiSetFieldHint:function(X,Y){var A=this;A.get("fieldHintNode").set("innerHTML",X);},_uiSetId:function(X,Y){var A=this;A.get("node").set("id",X);},_uiSetLabelAlign:function(Y,a){var A=this;var X=A.get("boundingBox");X.replaceClass(T[a],T[Y]);var Z="removeClass";if(L.test(Y)){Z="addClass";}X[Z](V);},_uiSetName:function(X,Y){var A=this;A.get("node").setAttribute("name",X);},_uiSetReadOnly:function(X,Y){var A=this;A.get("node").setAttribute("readOnly",X);},_uiSetSize:function(X,Y){var A=this;A.get("node").setAttribute("size",X);},_uiSetTabIndex:function(X,Y){var A=this;A.get("node").setAttribute("tabIndex",X);},_uiSetValue:function(X,Y){var A=this;A.get("node").val(X);},_requireAddAttr:false}});P.Field=I;},"1.0.1",{requires:["aui-base","aui-component","substitute"]});/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.2.0PR1
build: nightly
*/
YUI.add("base-base",function(B){var I=B.Object,K=B.Lang,J=".",G="destroy",R="init",Q="initialized",H="destroyed",D="initializer",N="bubbleTargets",E="_bubbleTargets",C=Object.prototype.constructor,M="deep",S="shallow",P="destructor",A=B.Attribute;function F(){A.call(this);var L=B.Plugin&&B.Plugin.Host;if(this._initPlugins&&L){L.call(this);}if(this._lazyAddAttrs!==false){this._lazyAddAttrs=true;}this.name=this.constructor.NAME;this._eventPrefix=this.constructor.EVENT_PREFIX||this.constructor.NAME;this.init.apply(this,arguments);}F._ATTR_CFG=A._ATTR_CFG.concat("cloneDefaultValue");F.NAME="base";F.ATTRS={initialized:{readOnly:true,value:false},destroyed:{readOnly:true,value:false}};F.prototype={init:function(L){this._yuievt.config.prefix=this._eventPrefix;this.publish(R,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defInitFn});this._preInitEventCfg(L);this.fire(R,{cfg:L});return this;},_preInitEventCfg:function(O){if(O){if(O.on){this.on(O.on);}if(O.after){this.after(O.after);}}var T,L,V,U=(O&&N in O);if(U||E in this){V=U?(O&&O.bubbleTargets):this._bubbleTargets;if(K.isArray(V)){for(T=0,L=V.length;T<L;T++){this.addTarget(V[T]);}}else{if(V){this.addTarget(V);}}}},destroy:function(){this.publish(G,{queuable:false,fireOnce:true,defaultTargetOnly:true,defaultFn:this._defDestroyFn});this.fire(G);this.detachAll();return this;},_defInitFn:function(L){this._initHierarchy(L.cfg);if(this._initPlugins){this._initPlugins(L.cfg);}this._set(Q,true);},_defDestroyFn:function(L){this._destroyHierarchy();if(this._destroyPlugins){this._destroyPlugins();}this._set(H,true);},_getClasses:function(){if(!this._classes){this._initHierarchyData();}return this._classes;},_getAttrCfgs:function(){if(!this._attrs){this._initHierarchyData();}return this._attrs;},_filterAttrCfgs:function(V,O){var T=null,L,U=V.ATTRS;if(U){for(L in U){if(U.hasOwnProperty(L)&&O[L]){T=T||{};T[L]=O[L];delete O[L];}}}return T;},_initHierarchyData:function(){var T=this.constructor,O=[],L=[];while(T){O[O.length]=T;if(T.ATTRS){L[L.length]=T.ATTRS;}T=T.superclass?T.superclass.constructor:null;}this._classes=O;this._attrs=this._aggregateAttrs(L);},_aggregateAttrs:function(Y){var V,Z,U,L,a,O,X,T=F._ATTR_CFG,W={};if(Y){for(O=Y.length-1;O>=0;--O){Z=Y[O];for(V in Z){if(Z.hasOwnProperty(V)){U=B.mix({},Z[V],true,T);L=U.value;X=U.cloneDefaultValue;if(L){if((X===undefined&&(C===L.constructor||K.isArray(L)))||X===M||X===true){U.value=B.clone(L);}else{if(X===S){U.value=B.merge(L);}}}a=null;if(V.indexOf(J)!==-1){a=V.split(J);V=a.shift();}if(a&&W[V]&&W[V].value){I.setValue(W[V].value,a,L);}else{if(!a){if(!W[V]){W[V]=U;}else{B.mix(W[V],U,true,T);}}}}}}}return W;},_initHierarchy:function(W){var T=this._lazyAddAttrs,X,Y,Z,U,O,V=this._getClasses(),L=this._getAttrCfgs();for(Z=V.length-1;Z>=0;Z--){X=V[Z];Y=X.prototype;if(X._yuibuild&&X._yuibuild.exts){for(U=0,O=X._yuibuild.exts.length;U<O;U++){X._yuibuild.exts[U].apply(this,arguments);}}this.addAttrs(this._filterAttrCfgs(X,L),W,T);if(Y.hasOwnProperty(D)){Y.initializer.apply(this,arguments);}}},_destroyHierarchy:function(){var V,O,U,L,T=this._getClasses();for(U=0,L=T.length;U<L;U++){V=T[U];O=V.prototype;if(O.hasOwnProperty(P)){O.destructor.apply(this,arguments);}}},toString:function(){return this.constructor.NAME+"["+B.stamp(this)+"]";}};B.mix(F,A,false,null,1);F.prototype.constructor=F;B.Base=F;},"3.2.0PR1",{requires:["attribute-base"]});YUI.add("base-pluginhost",function(C){var A=C.Base,B=C.Plugin.Host;C.mix(A,B,false,null,1);A.plug=B.plug;A.unplug=B.unplug;},"3.2.0PR1",{requires:["base-base","pluginhost"]});YUI.add("base-build",function(D){var B=D.Base,A=D.Lang,C;B._build=function(F,L,P,T,S,O){var U=B._build,G=U._ctor(L,O),J=U._cfg(L,O),R=U._mixCust,N=J.aggregates,E=J.custom,I=G._yuibuild.dynamic,M,K,H,Q;if(I&&N){for(M=0,K=N.length;M<K;++M){H=N[M];if(L.hasOwnProperty(H)){G[H]=A.isArray(L[H])?[]:{};}}}for(M=0,K=P.length;M<K;M++){Q=P[M];D.mix(G,Q,true,null,1);R(G,Q,N,E);G._yuibuild.exts.push(Q);}if(T){D.mix(G.prototype,T,true);}if(S){D.mix(G,U._clean(S,N,E),true);R(G,S,N,E);}G.prototype.hasImpl=U._impl;if(I){G.NAME=F;G.prototype.constructor=G;}return G;};C=B._build;D.mix(C,{_mixCust:function(G,F,I,H){if(I){D.aggregate(G,F,true,I);}if(H){for(var E in H){if(H.hasOwnProperty(E)){H[E](E,G,F);}}}},_tmpl:function(E){function F(){F.superclass.constructor.apply(this,arguments);}D.extend(F,E);return F;},_impl:function(H){var K=this._getClasses(),J,F,E,I,L,G;for(J=0,F=K.length;J<F;J++){E=K[J];if(E._yuibuild){I=E._yuibuild.exts;L=I.length;for(G=0;G<L;G++){if(I[G]===H){return true;}}}}return false;},_ctor:function(E,F){var G=(F&&false===F.dynamic)?false:true,H=(G)?C._tmpl(E):E;H._yuibuild={id:null,exts:[],dynamic:G};return H;},_cfg:function(E,F){var G=[],J={},I,H=(F&&F.aggregates),L=(F&&F.custom),K=E;while(K&&K.prototype){I=K._buildCfg;if(I){if(I.aggregates){G=G.concat(I.aggregates);}if(I.custom){D.mix(J,I.custom,true);}}K=K.superclass?K.superclass.constructor:null;}if(H){G=G.concat(H);}if(L){D.mix(J,F.cfgBuild,true);}return{aggregates:G,custom:J};},_clean:function(K,J,G){var I,F,E,H=D.merge(K);for(I in G){if(H.hasOwnProperty(I)){delete H[I];}}for(F=0,E=J.length;F<E;F++){I=J[F];if(H.hasOwnProperty(I)){delete H[I];}}return H;}});B.build=function(G,E,H,F){return C(G,E,H,null,null,F);};B.create=function(E,H,G,F,I){return C(E,H,G,F,I);};B.mix=function(E,F){return C(null,E,F,null,null,{dynamic:false});};B._buildCfg={custom:{ATTRS:function(J,H,F){H.ATTRS=H.ATTRS||{};if(F.ATTRS){var G=F.ATTRS,I=H.ATTRS,E;for(E in G){if(G.hasOwnProperty(E)){I[E]=I[E]||{};D.mix(I[E],G[E],true);}}}}},aggregates:["_PLUG","_UNPLUG"]};},"3.2.0PR1",{requires:["base-base"]});YUI.add("base",function(A){},"3.2.0PR1",{use:["base-base","base-pluginhost","base-build"]});